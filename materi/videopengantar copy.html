<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apersepsi â€¢ Jenis Pewarna Rambut Uban</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --navbar-h: 55px;
            --footer-h: 40px;
            --brand: #ff3f8e;
            --sidebar-w: 255px;
            --sidebar-gap: 1px;
            --line: #e5e7eb;
        }

        html,
        body {
            height: 100%;
        }

        body {
            padding-bottom: var(--footer-h);
            background: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        main.app-shell {
            height: calc(100vh - var(--navbar-h) - var(--footer-h));
            overflow: hidden;
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid #eee;
        }

        .no-top-gap>[class^="col-"],
        .no-top-gap>aside,
        .no-top-gap>section {
            padding-top: 0 !important;
        }

        .menu-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .04);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
            font-size: .95rem;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
        }

        .btn-brand:hover {
            color: #fff;
            filter: brightness(.95);
        }

        @media (min-width:768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }

            .content-col,
            .content-scroll {
                height: 100%;
                overflow: hidden;
            }

            .materi-card {
                height: clamp(520px, 66vh, 780px);
            }

            .materi-card .card-body.scrollable {
                flex: 1 1 auto;
                min-height: 0;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }

            .sticky-cta {
                position: fixed;
                bottom: calc(var(--footer-h) + 8px);
                left: calc(var(--sidebar-w) + var(--sidebar-gap));
                right: 12px;
                z-index: 1030;
            }
        }

        @media (max-width: 767.98px) {

            main.app-shell,
            .content-col,
            .content-scroll {
                height: auto;
                overflow: visible;
            }

            .materi-card .card-body.scrollable {
                min-height: 0;
                max-height: none;
                overflow: visible;
            }

            .sidebar-fixed {
                position: static;
                width: 100%;
                height: auto;
                overflow: visible;
            }

            .sticky-cta {
                position: static;
                margin-top: .5rem;
            }
        }

        .content-col {
            height: 100%;
            overflow: hidden;
        }

        .content-scroll {
            height: 100%;
            overflow: hidden;
        }

        .materi-card .card-header {
            flex: 0 0 auto;
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: .5rem 1rem .4rem !important;
        }

        .min-vh-0 {
            min-height: 0 !important;
        }

        .figure img {
            border-radius: 12px;
            border: 1px solid var(--line);
        }

        /* CHIP & DROPZONE INTERAKTIF */
        .chip {
            border: 1px solid var(--line);
            border-radius: 999px;
            background: #fff;
            padding: .35rem .8rem;
            cursor: grab;
            user-select: none;
            font-size: .9rem;
        }

        .drop {
            min-height: 70px;
            border: 2px dashed var(--line);
            border-radius: 12px;
            padding: .5rem;
            background: #fcfcff;
            font-size: .85rem;
        }

        .drop.drag-over {
            border-color: var(--brand);
            background: #ffe6f3;
        }

        .drop.correct {
            border-color: #198754;
            background: #e8fff1;
        }

        .progress-mini {
            height: 10px;
            background: #e9ecef;
            border-radius: 999px;
            overflow: hidden;
        }

        .progress-mini>span {
            display: block;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, var(--brand), #ffb6d9);
            transition: width .35s;
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem; color:var(--brand)"></i>
                <strong>Pewarnaan Rambut</strong> <span class="fw-normal">â€¢ Jenis Pewarna Uban</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            aria-current="page" href="./apersepsi.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../latihan.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                    <li class="nav-item"><a class="nav-link" href="../peta.html">Peta Konsep</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- KONTEN -->
    <main class="main-pad app-shell">
        <div class="container-fluid">
            <div class="row g-1 no-top-gap h-100">
                <!-- SIDEBAR (boleh menyesuaikan dengan strukturmu sendiri) -->
                <aside class="col-12 col-md-auto order-1 order-md-0 p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm">
                        <div class="menu-title"><i class="bi bi-journal-bookmark"></i> Materi</div>
                        <!-- isi sidebar lain di sini -->
                        <a class="menu-item active" href="#">2. Jenis Pewarna Rambut Uban</a>
                    </nav>
                </aside>

                <!-- KONTEN KANAN -->
                <section class="col-12 col-md-9 col-xl-10 content-col content-with-fixed order-2 order-md-0">
                    <div class="content-scroll">
                        <div class="card shadow-sm materi-card">
                            <div class="card-header d-flex align-items-center gap-2">
                                <i class="bi bi-lightbulb" style="color:var(--brand); font-size:1.25rem;"></i>
                                <h3 class="h5 mb-0 fw-bold">Jenis Pewarna Rambut Uban</h3>
                            </div>

                            <div class="card-body scrollable flex-grow-1 min-vh-0">
                                <!-- =================== MATERI UTAMA =================== -->
                                <section class="pengertian mb-3">
                                    <div class="card shadow-sm border-0">
                                        <div class="card-body">
                                            <p>
                                                Pewarnaan uban bisa dilakukan dengan beberapa jenis produk. Setiap jenis
                                                memiliki cara kerja, ketahanan, dan pengaruh yang berbeda-beda.
                                                Berikut penjelasan singkatnya berdasarkan buku:
                                            </p>

                                            <div class="accordion mb-3" id="accTypes">
                                                <!-- a. PERMANEN -->
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header" id="hA">
                                                        <button class="accordion-button" type="button"
                                                            data-bs-toggle="collapse" data-bs-target="#cA"
                                                            aria-expanded="true">
                                                            a) Cat Rambut Permanen
                                                        </button>
                                                    </h2>
                                                    <div id="cA" class="accordion-collapse collapse show"
                                                        data-bs-parent="#accTypes">
                                                        <div class="accordion-body">
                                                            <div class="row g-3 align-items-center">
                                                                <div class="col-md-7">
                                                                    <p>
                                                                        Cat rambut permanen digunakan untuk menutupi
                                                                        uban dengan baik dan memberikan hasil yang
                                                                        tahan lama. Biasanya cat ini mengandung
                                                                        <strong>amonia</strong> dan
                                                                        <strong>hidrogen peroksida</strong> yang
                                                                        membuka kutikula rambut, sehingga pigmen baru
                                                                        dapat masuk ke dalam batang rambut.
                                                                    </p>
                                                                    <p class="mb-1">
                                                                        Prosesnya melibatkan pencampuran pewarna dengan
                                                                        <em>developer</em>, kemudian diaplikasikan ke
                                                                        rambut dan dibiarkan sesuai waktu yang
                                                                        dianjurkan sebelum dibilas.
                                                                    </p>
                                                                    <span class="badge text-bg-primary">Menutup uban
                                                                        sepenuhnya</span>
                                                                    <span class="badge text-bg-light border">Ketahanan:
                                                                        paling lama</span>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <figure class="figure mb-0 text-center">
                                                                        <img src="/mnt/data/A_boxed_carton_of_Miratone_Semi-Permanent_Cream_Co.png"
                                                                            class="img-fluid"
                                                                            alt="Contoh kemasan cat rambut permanen atau semi-permanen">
                                                                        <figcaption class="figure-caption">
                                                                            Contoh produk cat rambut (ilustrasi).
                                                                        </figcaption>
                                                                    </figure>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- b. SEMI PERMANEN -->
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header" id="hB">
                                                        <button class="accordion-button collapsed" type="button"
                                                            data-bs-toggle="collapse" data-bs-target="#cB">
                                                            b) Cat Rambut Semipermanen
                                                        </button>
                                                    </h2>
                                                    <div id="cB" class="accordion-collapse collapse"
                                                        data-bs-parent="#accTypes">
                                                        <div class="accordion-body">
                                                            <div class="row g-3 align-items-center">
                                                                <div class="col-md-7">
                                                                    <p>
                                                                        Pewarna semipermanen <strong>tidak
                                                                            mengandung amonia</strong> dan hanya
                                                                        menutupi permukaan batang rambut. Hasilnya
                                                                        lebih lembut dan tidak setahan pewarna
                                                                        permanen.
                                                                    </p>
                                                                    <p class="mb-1">
                                                                        Warna biasanya bertahan sekitar <strong>4â€“6
                                                                            minggu</strong>, kemudian akan memudar
                                                                        secara bertahap setelah beberapa kali
                                                                        keramas.
                                                                    </p>
                                                                    <span class="badge text-bg-warning text-dark">
                                                                        Tanpa amonia
                                                                    </span>
                                                                    <span class="badge text-bg-light border">
                                                                        Cocok untuk yang belum berani permanen
                                                                    </span>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <figure class="figure mb-0 text-center">
                                                                        <img src="/mnt/data/A_boxed_carton_of_Miratone_Semi-Permanent_Cream_Co.png"
                                                                            class="img-fluid"
                                                                            alt="Contoh kemasan cat rambut semipermanen">
                                                                        <figcaption class="figure-caption">
                                                                            Ilustrasi produk semipermanen.
                                                                        </figcaption>
                                                                    </figure>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- c. HENNA -->
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header" id="hC">
                                                        <button class="accordion-button collapsed" type="button"
                                                            data-bs-toggle="collapse" data-bs-target="#cC">
                                                            c) Henna
                                                        </button>
                                                    </h2>
                                                    <div id="cC" class="accordion-collapse collapse"
                                                        data-bs-parent="#accTypes">
                                                        <div class="accordion-body">
                                                            <p>
                                                                Henna merupakan pewarna alami yang berasal dari daun
                                                                tanaman henna. Henna dapat memberikan
                                                                <strong>warna merah kecokelatan</strong> pada rambut
                                                                dan dapat menutupi uban.
                                                            </p>
                                                            <p class="mb-1">
                                                                Cara penggunaannya biasanya dengan mencampur bubuk
                                                                henna dengan air atau teh, lalu dioleskan ke rambut
                                                                dan dibiarkan beberapa jam sebelum dibilas. Henna
                                                                cenderung tidak menyebabkan kerusakan rambut seperti
                                                                pewarna kimia keras.
                                                            </p>
                                                            <span class="badge text-bg-success">Bahan alami</span>
                                                            <span class="badge text-bg-light border">Hasil kuat dan
                                                                cenderung awet</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- d. TEMPORER -->
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header" id="hD">
                                                        <button class="accordion-button collapsed" type="button"
                                                            data-bs-toggle="collapse" data-bs-target="#cD">
                                                            d) Cat Rambut Temporer
                                                        </button>
                                                    </h2>
                                                    <div id="cD" class="accordion-collapse collapse"
                                                        data-bs-parent="#accTypes">
                                                        <div class="accordion-body">
                                                            <p>
                                                                Pewarna rambut temporer memberikan hasil
                                                                <strong>sementara</strong> dan biasanya bertahan hanya
                                                                beberapa kali keramas. Cat ini tersedia dalam bentuk
                                                                semprot, busa, gel, atau kapur rambut.
                                                            </p>
                                                            <p class="mb-1">
                                                                Produk ini cocok untuk acara khusus atau untuk
                                                                mencoba warna baru sebelum memutuskan memakai
                                                                pewarna yang lebih permanen.
                                                            </p>
                                                            <span class="badge text-bg-secondary">Paling cepat
                                                                pudar</span>
                                                            <span class="badge text-bg-light border">Cocok untuk
                                                                eksperimen warna</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- e. TONING / TONER -->
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header" id="hE">
                                                        <button class="accordion-button collapsed" type="button"
                                                            data-bs-toggle="collapse" data-bs-target="#cE">
                                                            e) Toning dan Pewarnaan dengan Toner
                                                        </button>
                                                    </h2>
                                                    <div id="cE" class="accordion-collapse collapse"
                                                        data-bs-parent="#accTypes">
                                                        <div class="accordion-body">
                                                            <p>
                                                                Toning atau penggunaan toner terutama dipakai untuk
                                                                <strong>menetralisir warna yang tidak
                                                                    diinginkan</strong>, seperti kuning atau oranye
                                                                setelah proses pemutihan atau pewarnaan.
                                                            </p>
                                                            <p class="mb-1">
                                                                Toner membantu menyegarkan warna uban dan
                                                                memberikan hasil yang lebih seimbang tanpa
                                                                mengubah warna rambut secara drastis. Ketahanannya
                                                                mirip semipermanen dan perlu diulang secara
                                                                berkala.
                                                            </p>
                                                            <span class="badge text-bg-info text-dark">Menetralisir
                                                                warna</span>
                                                            <span class="badge text-bg-light border">Dipakai setelah
                                                                bleaching/pewarnaan</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <p class="small text-secondary mb-0">
                                                Saat memilih pewarna rambut uban, pertimbangkan kondisi rambut,
                                                sensitivitas kulit kepala, dan seberapa lama hasil yang diinginkan.
                                                Pewarna permanen dan henna memberikan hasil yang lebih tahan lama,
                                                sedangkan temporer dan toner lebih lembut dan mudah diubah.
                                            </p>
                                        </div>
                                    </div>
                                </section>

                                <!-- =================== INTERAKTIF 1: SKALA KETAHANAN =================== -->
                                <section class="card shadow-sm mb-3">
                                    <div class="card-body">
                                        <h2 class="h6 text-uppercase text-muted mb-2">Latihan 1 â€“ Skala Ketahanan
                                            Pewarna Uban</h2>
                                        <p class="mb-2">
                                            Seret setiap jenis pewarna ke posisi yang tepat, dari
                                            <strong>paling cepat pudar</strong> sampai
                                            <strong>paling awet</strong>.
                                        </p>

                                        <div class="row g-3">
                                            <!-- Pool chip -->
                                            <div class="col-md-4">
                                                <div class="p-2 border rounded-3 bg-light">
                                                    <div id="pool" class="vstack gap-2">
                                                        <div class="chip" draggable="true" data-key="temp">
                                                            Cat rambut temporer
                                                        </div>
                                                        <div class="chip" draggable="true" data-key="toner">
                                                            Toning / Toner
                                                        </div>
                                                        <div class="chip" draggable="true" data-key="semi">
                                                            Cat semipermanen
                                                        </div>
                                                        <div class="chip" draggable="true" data-key="perm">
                                                            Cat permanen
                                                        </div>
                                                        <div class="chip" draggable="true" data-key="henna">
                                                            Henna
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Drop zones -->
                                            <div class="col-md-8">
                                                <div class="row g-2">
                                                    <div class="col-6 col-lg-4">
                                                        <div class="small text-secondary mb-1">Paling cepat pudar</div>
                                                        <div class="drop" data-accept="temp">
                                                            <small class="text-muted">Letakkan jenis yang paling cepat
                                                                hilang.</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 col-lg-4">
                                                        <div class="small text-secondary mb-1">Menyegarkan warna</div>
                                                        <div class="drop" data-accept="toner">
                                                            <small class="text-muted">Toner/toning.</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 col-lg-4">
                                                        <div class="small text-secondary mb-1">Sedang</div>
                                                        <div class="drop" data-accept="semi">
                                                            <small class="text-muted">Semipermanen.</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 col-lg-6">
                                                        <div class="small text-secondary mb-1">Awet</div>
                                                        <div class="drop" data-accept="perm">
                                                            <small class="text-muted">Cat permanen.</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 col-lg-6">
                                                        <div class="small text-secondary mb-1">Alami & kuat</div>
                                                        <div class="drop" data-accept="henna">
                                                            <small class="text-muted">Henna.</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex gap-2 mt-3">
                                            <button class="btn btn-brand btn-sm" id="scaleCheck">Simpan &
                                                Periksa</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                id="scaleReset">Reset</button>
                                        </div>
                                        <div id="scaleFb" class="small mt-2"></div>
                                    </div>
                                </section>

                                <!-- =================== INTERAKTIF 2: KUIS =================== -->
                                <section class="card shadow-sm mb-2">
                                    <div class="card-body">
                                        <h2 class="h6 text-uppercase text-muted mb-2">Latihan 2 â€“ Kuis Benar / Salah
                                        </h2>
                                        <p class="mb-2">Jawablah dengan memilih <strong>Benar</strong> atau
                                            <strong>Salah</strong> sesuai materi di atas.
                                        </p>

                                        <ol class="mb-2" id="quiz">
                                            <li class="mb-2">
                                                Cat rambut permanen biasanya mengandung amonia dan developer sehingga
                                                hasilnya paling tahan lama untuk menutup uban.
                                                <div class="mt-1">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q1"
                                                            value="B">
                                                        <label class="form-check-label">Benar</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q1"
                                                            value="S">
                                                        <label class="form-check-label">Salah</label>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="mb-2">
                                                Cat rambut semipermanen dapat menembus sampai ke korteks rambut dan
                                                menutup uban secara permanen.
                                                <div class="mt-1">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q2"
                                                            value="B">
                                                        <label class="form-check-label">Benar</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q2"
                                                            value="S">
                                                        <label class="form-check-label">Salah</label>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="mb-2">
                                                Henna berasal dari bahan alami dan umumnya memberikan warna merah
                                                kecokelatan pada rambut uban.
                                                <div class="mt-1">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q3"
                                                            value="B">
                                                        <label class="form-check-label">Benar</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q3"
                                                            value="S">
                                                        <label class="form-check-label">Salah</label>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="mb-2">
                                                Cat rambut temporer biasanya bertahan sampai berbulan-bulan dan sulit
                                                dihilangkan.
                                                <div class="mt-1">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q4"
                                                            value="B">
                                                        <label class="form-check-label">Benar</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q4"
                                                            value="S">
                                                        <label class="form-check-label">Salah</label>
                                                    </div>
                                                </div>
                                            </li>

                                            <li class="mb-2">
                                                Toner digunakan terutama untuk menetralisir warna yang tidak
                                                diinginkan, seperti kuning atau oranye setelah proses pemutihan atau
                                                pewarnaan.
                                                <div class="mt-1">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q5"
                                                            value="B">
                                                        <label class="form-check-label">Benar</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="q5"
                                                            value="S">
                                                        <label class="form-check-label">Salah</label>
                                                    </div>
                                                </div>
                                            </li>
                                        </ol>

                                        <div class="d-flex gap-2">
                                            <button class="btn btn-brand btn-sm" id="quizCheck">Simpan & Nilai</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                id="quizReset">Reset</button>
                                        </div>
                                        <div id="quizFb" class="small mt-2"></div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- CTA di bawah -->
    <div class="sticky-cta">
        <div class="container">
            <div class="col-12 col-md-10 mx-auto">
                <div class="d-flex justify-content-center align-items-center flex-wrap gap-2 w-100">
                    <a class="btn btn-outline-secondary" href="#">
                        <i class="bi bi-arrow-left"></i> Sebelumnya
                    </a>
                    <a class="btn btn-brand" href="#">
                        Berikutnya <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small">
            <span>SMKS ISFI BANJARMASIN â€¢ Hair Coloring</span>
            <span class="text-muted">Â© 2025 â€¢ Jenis Pewarna Rambut Uban</span>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (() => {
            // KEY localStorage khusus halaman ini
            const KEY = 'jenis-pewarnaan-uban-v1';

            const $ = s => document.querySelector(s);
            const $$ = s => Array.from(document.querySelectorAll(s));

            const get = () => JSON.parse(localStorage.getItem(KEY) || '{}');
            const set = (o) => localStorage.setItem(KEY, JSON.stringify(o));
            const saveState = (updater) => {
                const d = get();
                updater(d);
                set(d);
            };

            const ok = t => `<div class="alert alert-success mb-0">${t}</div>`;
            const warn = t => `<div class="alert alert-warning mb-0">${t}</div>`;

            function updateProgress() {
                const d = get();
                let done = 0;
                if (d.scaleOk) done++;
                if (typeof d.quizScore === 'number') done++;
                const bar = $('#bar'); // kalau nanti mau ditambahkan progress bar
                if (bar) {
                    bar.style.width = Math.round(done / 2 * 100) + '%';
                }
            }

            /* ========== DRAG & DROP ========== */
            const pool = $('#pool');
            let dragRef = null;

            document.addEventListener('dragstart', e => {
                if (e.target.classList.contains('chip')) {
                    dragRef = e.target;
                    e.dataTransfer.setData('text/plain', e.target.dataset.key);
                }
            });

            $$('.drop').forEach(z => {
                ['dragenter', 'dragover'].forEach(ev => z.addEventListener(ev, e => {
                    e.preventDefault();
                    z.classList.add('drag-over');
                }));
                ['dragleave', 'drop'].forEach(ev => z.addEventListener(ev, () => {
                    z.classList.remove('drag-over');
                }));
                z.addEventListener('drop', e => {
                    e.preventDefault();
                    if (!dragRef) return;
                    z.innerHTML = '';
                    z.appendChild(dragRef);
                    saveLayout();
                });
            });

            function saveLayout() {
                saveState(d => {
                    const zones = {};
                    $$('.drop').forEach(dropEl => {
                        const acc = dropEl.dataset.accept || '';
                        zones[acc] = Array.from(dropEl.querySelectorAll('.chip')).map(ch => ch.dataset.key);
                    });
                    const poolKeys = Array.from(pool.querySelectorAll('.chip')).map(ch => ch.dataset.key);
                    d.scaleLayout = { pool: poolKeys, zones };
                    d.scaleFb = $('#scaleFb').innerHTML;
                });
            }

            $('#scaleCheck').addEventListener('click', () => {
                let total = $$('.drop').length;
                let benar = 0;

                $$('.drop').forEach(z => {
                    z.classList.remove('correct');
                    const chip = z.querySelector('.chip');
                    if (chip && chip.dataset.key === z.dataset.accept) {
                        benar++;
                        z.classList.add('correct');
                    }
                });

                const full = (benar === total);
                $('#scaleFb').innerHTML = full
                    ? ok('Urutan ketahanan pewarna uban sudah tepat. ğŸ‰')
                    : warn(`Benar ${benar}/${total}. Coba baca lagi penjelasan tiap jenis pewarna di atas.`);

                saveState(d => {
                    d.scaleOk = full;
                    saveLayout();
                });
                updateProgress();
            });

            $('#scaleReset').addEventListener('click', () => {
                const chips = $$('.chip');
                chips.forEach(ch => pool.appendChild(ch));
                $$('.drop').forEach(z => {
                    z.classList.remove('correct', 'drag-over');
                    z.querySelectorAll('.chip').forEach(ch => pool.appendChild(ch));
                });
                $('#scaleFb').innerHTML = '';
                saveState(d => {
                    delete d.scaleOk;
                    delete d.scaleLayout;
                    delete d.scaleFb;
                });
                updateProgress();
            });

            /* ========== KUIS BENAR / SALAH ========== */
            const kunci = {
                q1: 'B', // permanen + amonia & developer
                q2: 'S', // semi bukan permanen
                q3: 'B', // henna alami
                q4: 'S', // temporer tidak berbulan-bulan
                q5: 'B'  // toner netralisir warna
            };

            $('#quizCheck').addEventListener('click', () => {
                let benar = 0;
                const total = Object.keys(kunci).length;
                const answers = {};

                Object.keys(kunci).forEach(name => {
                    const sel = document.querySelector(`input[name="${name}"]:checked`);
                    if (sel) {
                        answers[name] = sel.value;
                        if (sel.value === kunci[name]) benar++;
                    }
                });

                const score = Math.round(benar / total * 100);
                $('#quizFb').innerHTML =
                    `<div class="alert ${score >= 80 ? 'alert-success' : 'alert-info'} mb-0">
                        Skor: <b>${score}</b>/100 (${benar}/${total} jawaban benar)
                    </div>`;

                saveState(d => {
                    d.quizScore = score;
                    d.quizAns = answers;
                    d.quizFb = $('#quizFb').innerHTML;
                });
                updateProgress();
            });

            $('#quizReset').addEventListener('click', () => {
                Object.keys(kunci).forEach(name => {
                    $$(`input[name="${name}"]`).forEach(r => r.checked = false);
                });
                $('#quizFb').innerHTML = '';
                saveState(d => {
                    delete d.quizScore;
                    delete d.quizAns;
                    delete d.quizFb;
                });
                updateProgress();
            });

            /* ========== RESTORE STATE SAAT LOAD ========== */
            window.addEventListener('DOMContentLoaded', () => {
                const d = get();

                // layout drag & drop
                if (d.scaleLayout) {
                    const allChips = $$('.chip');
                    allChips.forEach(ch => pool.appendChild(ch));

                    const zones = d.scaleLayout.zones || {};
                    $$('.drop').forEach(z => {
                        const acc = z.dataset.accept || '';
                        const keys = zones[acc] || [];
                        keys.forEach(k => {
                            const chip = allChips.find(c => c.dataset.key === k);
                            if (chip) z.appendChild(chip);
                        });
                    });

                    if (d.scaleFb) $('#scaleFb').innerHTML = d.scaleFb;
                    if (d.scaleOk) {
                        $$('.drop').forEach(z => {
                            const chip = z.querySelector('.chip');
                            if (chip && chip.dataset.key === z.dataset.accept) {
                                z.classList.add('correct');
                            }
                        });
                    }
                }

                // jawaban kuis
                if (d.quizAns) {
                    Object.entries(d.quizAns).forEach(([name, val]) => {
                        const inp = document.querySelector(`input[name="${name}"][value="${val}"]`);
                        if (inp) inp.checked = true;
                    });
                }
                if (d.quizFb) $('#quizFb').innerHTML = d.quizFb;

                updateProgress();
            });
        })();
    </script>
</body>

</html>