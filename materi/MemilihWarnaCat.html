<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apersepsi • Single Application</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --navbar-h: 55px;
            --footer-h: 40px;
            --brand: #ff3f8e;
            --sidebar-w: 255px;
            --sidebar-gap: 8px;
            --line: #e5e7eb;
        }

        html,
        body {
            height: 100%;
        }

        body {
            padding-bottom: var(--footer-h);
            background: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        main.app-shell {
            min-height: calc(100vh - var(--navbar-h) - var(--footer-h));
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid #eee;
        }

        .menu-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .04);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
            font-size: .95rem;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        .no-top-gap>aside,
        .no-top-gap>section {
            padding-top: 0 !important;
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
        }

        .btn-brand:hover {
            color: #fff;
            filter: brightness(.95);
        }

        .materi-card .card-header {
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: .5rem 1rem;
        }

        .page-nav {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .page-nav-inner {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: .5rem;
            flex-wrap: wrap;
        }

        /* Tombol outline-primary jadi pink */
        .btn-outline-primary {
            color: var(--brand);
            border-color: var(--brand);
        }

        .btn-outline-primary:hover,
        .btn-outline-primary:focus {
            background-color: var(--brand);
            border-color: var(--brand);
            color: #fff;
        }

        /* Mobile: sidebar ikut alur */
        @media (max-width: 767.98px) {
            .sidebar-fixed {
                position: static;
                width: 100%;
            }
        }

        /* Desktop: sidebar fixed kiri, konten bergeser & card dipendekkan */
        @media (min-width: 768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }

            .materi-card {
                display: flex;
                flex-direction: column;
                max-height: calc(100dvh - var(--navbar-h) - var(--footer-h) - 90px);
            }

            .materi-card .card-body {
                flex: 1 1 auto;
                min-height: 0;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }
        }

        .sticky-top-shadow {
            box-shadow: 0 6px 12px rgba(0, 0, 0, .06);
        }

        .hair-chip {
            height: 60px;
            border-radius: 999px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, .18);
            border: 1px solid rgba(0, 0, 0, .1);
        }

        .hair-base {
            background: linear-gradient(90deg, #24140d, #3b2315);
        }

        /* hitam kecokelatan */
        .tone-auburn {
            background: linear-gradient(90deg, #3b2315, #6a2b1b);
        }

        .tone-blonde {
            background: linear-gradient(90deg, #3b2315, #f2d398);
        }

        .tone-dimension {
            background: linear-gradient(90deg, #1b100b, #f0c28a);
        }

        .tone-burgundy {
            background: linear-gradient(90deg, #251016, #6b1236);
        }

        .tone-brunette {
            background: linear-gradient(90deg, #1b120c, #3d2717);
        }

        .tone-brownblend {
            background: linear-gradient(90deg, #1b120c, #5c3822, #8b5a2b);
        }

        .tone-blueblack {
            background: linear-gradient(90deg, #09080f, #151a2f);
        }

        .preview-box {
            height: 120px;
            border-radius: 1rem;
            box-shadow: 0 6px 14px rgba(0, 0, 0, .2);
            border: 1px solid rgba(0, 0, 0, .15);
        }

        .swatch-label {
            font-size: .8rem;
            text-transform: uppercase;
            letter-spacing: .08em;
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem; color:var(--brand)"></i>
                <strong>Pewarnaan Rambut</strong> <span class="fw-normal">• Single Application</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            aria-current="page" href="videopengantar.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../evaluasi.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                    <li class="nav-item"><a class="nav-link" href="../peta.html">Peta Konsep</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- MAIN: sidebar + konten -->
    <main class="main-pad app-shell">
        <div class="container-fluid">
            <div class="row g-1 no-top-gap">
                <!-- SIDEBAR -->
                <aside class="col-12 col-md-auto order-1 order-md-0 p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm">
                        <div class="menu-title"><i class="bi bi-journal-bookmark"></i> Single Application</div>
                        <a class="menu-item" aria-current="page" href="videopengantar.html">
                            <i class="bi bi-lightbulb">Video Pengantar</i>
                        </a>
                        <a class="menu-item " aria-current="page" href="SingleApplication.html">
                            <i class="bi bi-lightbulb"></i> Overview Single Application
                        </a>

                        <!-- A. Pewarnaan Rambut Single -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-A" aria-expanded="true"
                            aria-controls="submenu-A">
                            <span class="me-2"><i class="bi bi-droplet-half"></i></span>
                            <span class="flex-grow-1 text-start">A. Pewarnaan Rambut Single</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-A">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanSingleApplication.html">1. Pewarnaan Single
                                        Application</a></li>
                                <li><a class="menu-item py-1" href="CaraMemilihWarna.html">2. Cara Memilih Warna</a>
                                </li>
                                <li><a class="menu-item py-1 active" href="MemilihWarnaCat.html">3. Memilih Warna
                                        Cat</a></li>
                                <li><a class="menu-item py-1" href="KontraindikasiPewarnaan.html">4. Kontraindikasi
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="HalYangDiperhatikan.html">5. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanA.html">6. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- B. Toning -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-B" aria-expanded="true"
                            aria-controls="submenu-B">
                            <span class="me-2"><i class="bi bi-palette"></i></span>
                            <span class="flex-grow-1 text-start">B. Toning</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-B">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="HairToning.html">1. Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="CiriHairToning.html">2. Ciri Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="KeunggulanHairToning.html">3. Keunggulan Hair
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="KosmetikHairToning.html">4. Kosmetik Hair Toning</a>
                                </li>
                                <li><a class="menu-item py-1" href="ProsedurToning.html">5. Prosedur Melakukan
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="HalDiperhatikanToning.html">6. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanB.html">7. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- C. Pewarnaan Uban -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-C" aria-expanded="true"
                            aria-controls="submenu-C">
                            <span class="me-2"><i class="bi bi-person-lines-fill"></i></span>
                            <span class="flex-grow-1 text-start">C. Pewarnaan Uban</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-C">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanUban.html">1. Pewarnaan Uban</a></li>
                                <li><a class="menu-item py-1" href="JenisPewarnaanUban.html">2. Jenis Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="TeknikPewarnaanUban.html">3. Teknik Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="UjiTempel.html">4. Uji Tempel</a></li>
                                <li><a class="menu-item py-1" href="ProsedurKerjaUban.html">5. Prosedur Kerja</a></li>
                                <li><a class="menu-item py-1" href="ReaksiAlergiUban.html">6. Reaksi Alergi</a></li>
                                <li><a class="menu-item py-1" href="KesalahanPewarnaanUban.html">7. Kesalahan
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanC.html">8. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- Evaluasi -->
                        <a class="menu-item" href="../evaluasi.html">
                            <i class="bi bi-clipboard-check"></i> Evaluasi
                        </a>
                        <a class="menu-item" href="VideoPentup.html">
                            <i class="bi bi-camera-video"></i> Evaluasi
                        </a>
                    </nav>
                </aside>

                <!-- KONTEN KANAN -->
                <section class="col-12 col-md-9 col-xl-10 content-with-fixed order-2 order-md-0">
                    <div class="card shadow-sm materi-card">
                        <div class="card-header d-flex align-items-center gap-2">
                            <i class="bi bi-lightbulb" style="color:var(--brand); font-size:1.25rem;"></i>
                            <h3 class="h5 mb-0 fw-bold">emilih Warna Cat Rambut untuk Rambut Hitam Kecokelatan
                            </h3>
                        </div>

                        <div class="card-body" id="apersepsi-hair-coloring">
                            <section id="materi" class="mb-4">
                                <div class="card shadow-sm border-0">
                                    <div class="card-body">
                                        <h2 class="h5 mb-3">Ringkasan Materi: Tabel 6.2 Warna untuk Rambut Hitam
                                            Kecokelatan</h2>
                                        <div class="table-responsive mb-3">
                                            <table class="table table-sm align-middle">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th style="width:25%">Warna Rambut</th>
                                                        <th>Warna Pewarna Rambut &amp; Efek</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td rowspan="7"><strong>Hitam kecokelatan</strong></td>
                                                        <td><strong>Auburn brown</strong> – cokelat kemerahan yang
                                                            memberi sentuhan elegan dan pantulan hangat pada rambut.
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Blonde highlight</strong> – garis-garis pirang
                                                            terang yang memberi kontras dan tampilan menarik.</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Akar gelap, ujung terang</strong> – mengombinasikan
                                                            warna gelap di akar dan ujung lebih terang untuk menambah
                                                            dimensi.</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Burgundy</strong> – merah keunguan yang memberi
                                                            tampilan dramatis dan berani.</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Brunette</strong> – cokelat tua yang natural dan
                                                            elegan.</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Brown blend</strong> – campuran berbagai nuansa
                                                            cokelat yang memberi penampilan lembut dan menarik.</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Blue black</strong> – hitam dengan pantulan biru
                                                            yang memberi kilau dan kesan segar.</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <h6 class="mb-2">Visualisasi Tone Warna</h6>
                                        <div class="row g-3">
                                            <div class="col-6 col-md-3 text-center">
                                                <div class="hair-chip hair-base mb-1"></div>
                                                <div class="swatch-label text-secondary">Base: Hitam kecokelatan</div>
                                            </div>
                                            <div class="col-6 col-md-3 text-center">
                                                <div class="hair-chip tone-auburn mb-1"></div>
                                                <div class="swatch-label text-secondary">Auburn brown</div>
                                            </div>
                                            <div class="col-6 col-md-3 text-center">
                                                <div class="hair-chip tone-blonde mb-1"></div>
                                                <div class="swatch-label text-secondary">Blonde highlight</div>
                                            </div>
                                            <div class="col-6 col-md-3 text-center">
                                                <div class="hair-chip tone-burgundy mb-1"></div>
                                                <div class="swatch-label text-secondary">Burgundy</div>
                                            </div>
                                            <div class="col-6 col-md-3 text-center">
                                                <div class="hair-chip tone-brunette mb-1"></div>
                                                <div class="swatch-label text-secondary">Brunette</div>
                                            </div>
                                            <div class="col-6 col-md-3 text-center">
                                                <div class="hair-chip tone-brownblend mb-1"></div>
                                                <div class="swatch-label text-secondary">Brown blend</div>
                                            </div>
                                            <div class="col-6 col-md-3 text-center">
                                                <div class="hair-chip tone-blueblack mb-1"></div>
                                                <div class="swatch-label text-secondary">Blue black</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- SIMULASI PENCAMPURAN -->
                            <section id="simulasi" class="mb-4">
                                <div class="card shadow-sm border-0">
                                    <div class="card-body">
                                        <figure class="mb-3 text-center">
                                            <!-- Grid foto rambut (adaptasi dari Gambar 6.1) -->
                                            <img src="../img/1,61.png" alt="Berbagai jenis tone warna rambut"
                                                class="img-fluid rounded shadow-sm" />
                                            <figcaption class="small text-secondary mt-2">Gambar 6.1 Berbagai jenis tone
                                                warna rambut (adaptasi dari buku).</figcaption>
                                        </figure>

                                        <!-- Grid Foto Rambut Tambahan -->
                                        <div class="row row-cols-2 row-cols-md-3 g-3 mb-4">
                                            <div class="col"><img
                                                    src="/mnt/data/Screenshot_20251122_143046_Adobe Acrobat.jpg"
                                                    class="img-fluid rounded shadow-sm" alt="Foto rambut 1"></div>
                                            <div class="col"><img
                                                    src="/mnt/data/Screenshot_20251122_143046_Adobe Acrobat.jpg"
                                                    class="img-fluid rounded shadow-sm" alt="Foto rambut 2"></div>
                                            <div class="col"><img
                                                    src="/mnt/data/Screenshot_20251122_143046_Adobe Acrobat.jpg"
                                                    class="img-fluid rounded shadow-sm" alt="Foto rambut 3"></div>
                                            <div class="col"><img
                                                    src="/mnt/data/Screenshot_20251122_143046_Adobe Acrobat.jpg"
                                                    class="img-fluid rounded shadow-sm" alt="Foto rambut 4"></div>
                                            <div class="col"><img
                                                    src="/mnt/data/Screenshot_20251122_143046_Adobe Acrobat.jpg"
                                                    class="img-fluid rounded shadow-sm" alt="Foto rambut 5"></div>
                                            <div class="col"><img
                                                    src="/mnt/data/Screenshot_20251122_143046_Adobe Acrobat.jpg"
                                                    class="img-fluid rounded shadow-sm" alt="Foto rambut 6"></div>
                                        </div>

                                        <h2 class="h5 mb-2">Simulasi Pencampuran Warna</h2>
                                        <p class="text-secondary small">Semua simulasi dimulai dari basis <strong>hitam
                                                kecokelatan</strong>. Pilih jenis tone dan tujuan efek, lalu amati
                                            preview warna dan penjelasannya.</p>

                                        <div class="row g-3 mb-3">
                                            <div class="col-md-4">
                                                <label class="form-label">1) Pilih tone campuran</label>
                                                <select id="toneSelect" class="form-select">
                                                    <option value="">-- pilih --</option>
                                                    <option value="auburn">Auburn brown (cokelat kemerahan)</option>
                                                    <option value="blonde">Blonde highlight</option>
                                                    <option value="dimension">Akar gelap + ujung terang</option>
                                                    <option value="burgundy">Burgundy (merah keunguan)</option>
                                                    <option value="brunette">Brunette (cokelat tua)</option>
                                                    <option value="brownblend">Brown blend (campuran cokelat)</option>
                                                    <option value="blueblack">Blue black (hitam kebiruan)</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">2) Tujuan tampilan klien</label>
                                                <select id="goalSelect" class="form-select">
                                                    <option value="">-- pilih --</option>
                                                    <option value="elegan">Elegan &amp; berkelas</option>
                                                    <option value="kontras">Kontras &amp; mencolok</option>
                                                    <option value="dimensi">Ber-dimensi &amp; bertekstur</option>
                                                    <option value="dramatis">Dramatis &amp; berani</option>
                                                    <option value="natural">Natural &amp; lembut</option>
                                                    <option value="segar">Segar &amp; berkilau</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">3) Intensitas campuran</label>
                                                <input type="range" class="form-range" id="intensityRange" min="1"
                                                    max="3" step="1" value="2">
                                                <div class="d-flex justify-content-between small text-secondary">
                                                    <span>Halus</span><span>Sedang</span><span>Berani</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row g-3 align-items-center mb-3">
                                            <div class="col-md-6">
                                                <h6 class="mb-1">Preview Rambut</h6>
                                                <div id="previewBox" class="preview-box hair-base"></div>
                                                <div class="small text-secondary mt-1">*Ilustrasi warna bukan foto asli
                                                    rambut, hanya simulasi tone.</div>
                                            </div>
                                            <div class="col-md-6">
                                                <h6 class="mb-1">Hasil Campuran</h6>
                                                <div id="resultText" class="border rounded p-3 small bg-light">
                                                    Pilih tone, tujuan tampilan, dan intensitas untuk melihat penjelasan
                                                    di sini.
                                                </div>
                                            </div>
                                        </div>

                                        <button class="btn btn-outline-primary" onclick="applyMix()">Terapkan
                                            Campuran</button>
                                        <button class="btn btn-outline-secondary ms-2" onclick="resetSimulasi()">Reset
                                            Simulasi</button>
                                    </div>
                                </div>
                            </section>

                            <!-- LATIHAN KONSEP -->
                            <section id="latihan" class="mb-5">
                                <div class="card shadow-sm border-0">
                                    <div class="card-body">
                                        <h2 class="h5 mb-2">Latihan Konsep Singkat</h2>
                                        <p class="text-secondary small">Pilih kombinasi warna yang paling sesuai untuk
                                            tujuan berikut.</p>

                                        <div class="mb-3">
                                            <p class="mb-1">1) Klien ingin tampilan <strong>dramatis dan berani</strong>
                                                untuk acara malam hari.</p>
                                            <select id="q1" class="form-select form-select-sm w-auto">
                                                <option value="">-- pilih warna --</option>
                                                <option value="auburn">Auburn brown</option>
                                                <option value="burgundy">Burgundy</option>
                                                <option value="brunette">Brunette</option>
                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <p class="mb-1">2) Klien tidak ingin warna mencolok, hanya ingin
                                                <strong>natural dan elegan</strong> untuk sehari-hari.
                                            </p>
                                            <select id="q2" class="form-select form-select-sm w-auto">
                                                <option value="">-- pilih warna --</option>
                                                <option value="blueblack">Blue black</option>
                                                <option value="brunette">Brunette</option>
                                                <option value="blonde">Blonde highlight</option>
                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <p class="mb-1">3) Klien ingin rambut tampak <strong>berdimensi</strong> dan
                                                tidak terlihat rata.</p>
                                            <select id="q3" class="form-select form-select-sm w-auto">
                                                <option value="">-- pilih warna --</option>
                                                <option value="dimension">Akar gelap + ujung terang</option>
                                                <option value="auburn">Auburn brown</option>
                                                <option value="blueblack">Blue black</option>
                                            </select>
                                        </div>

                                        <button class="btn btn-outline-primary" onclick="cekLatihan()">Cek
                                            Jawaban</button>
                                        <button class="btn btn-outline-secondary ms-2" onclick="resetLatihan()">Reset
                                            Latihan</button>
                                        <div id="feedLatihan" class="mt-2"></div>
                                    </div>
                                </div>
                            </section>

                        </div>
                    </div>

                    <!-- TOMBOL NAVIGASI DI BAWAH KONTEN -->
                    <div class="page-nav">
                        <div class="page-nav-inner">
                            <a class="btn btn-outline-secondary" href="CaraMemilihWarna.html">
                                <i class="bi bi-arrow-left"></i> Sebelumnya
                            </a>
                            <a class="btn btn-brand" href="KontraindikasiPewarnaan.html">
                                Berikutnya <i class="bi bi-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small">
            <span>SMKS ISFI BANJARMASIN • Hair Coloring</span>
            <span class="text-muted">© 2025 • Single Application</span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ==========================
        // LOCAL STORAGE HELPER
        // ==========================
        const LS_KEY = 'memilih_warna_cat_hitam_kecokelatan_v1';

        function loadState() {
            try {
                const raw = localStorage.getItem(LS_KEY);
                return raw ? JSON.parse(raw) : {};
            } catch (e) {
                console.warn('Gagal membaca localStorage', e);
                return {};
            }
        }

        function saveState(partial) {
            try {
                const current = loadState();
                const next = Object.assign({}, current, partial);
                localStorage.setItem(LS_KEY, JSON.stringify(next));
            } catch (e) {
                console.warn('Gagal menyimpan ke localStorage', e);
            }
        }

        // ==========================
        // DATA PENJELASAN TONE & TUJUAN
        // ==========================
        const toneInfo = {
            auburn: {
                className: 'tone-auburn',
                desc: 'Campuran basis hitam kecokelatan dengan auburn brown menambah pantulan cokelat kemerahan yang hangat dan elegan.'
            },
            blonde: {
                className: 'tone-blonde',
                desc: 'Blonde highlight di atas basis hitam kecokelatan memberikan garis-garis terang yang kontras dan menarik.'
            },
            dimension: {
                className: 'tone-dimension',
                desc: 'Akar gelap dipertahankan, sementara ujung dibuat lebih terang sehingga rambut tampak lebih berdimensi dan bervolume.'
            },
            burgundy: {
                className: 'tone-burgundy',
                desc: 'Burgundy memberi sentuhan merah keunguan yang dramatis dan berani, tetap tampak jelas walau di ruangan redup.'
            },
            brunette: {
                className: 'tone-brunette',
                desc: 'Brunette (cokelat tua) memberikan tampilan natural, rapi, dan elegan – cocok untuk penggunaan sehari-hari.'
            },
            brownblend: {
                className: 'tone-brownblend',
                desc: 'Brown blend memadukan beberapa nuansa cokelat sehingga rambut tampak lembut, bergradasi, dan tidak terlihat rata.'
            },
            blueblack: {
                className: 'tone-blueblack',
                desc: 'Blue black menambahkan pantulan biru pada rambut hitam kecokelatan, memberikan kesan segar dan berkilau.'
            }
        };

        const goalText = {
            elegan: 'Fokus pada garis dan kilau yang halus, warna tidak terlalu mencolok, namun memberi kesan rapi dan berkelas.',
            kontras: 'Gunakan warna/garis terang untuk menonjol di beberapa bagian, sehingga menarik perhatian.',
            dimensi: 'Beberapa level kecerahan membuat rambut tampak berlapis dan tidak terlihat rata.',
            dramatis: 'Pilihan warna pekat dan berbeda jelas dari warna dasar, ideal untuk tampilan bold.',
            natural: 'Pilih tone yang dekat dengan warna dasar, sehingga hasilnya lembut dan aman untuk aktivitas harian.',
            segar: 'Pantulan dingin atau glossy membuat rambut terlihat lebih hidup dan berkilau.'
        };

        const DEFAULT_RESULT_TEXT =
            'Pilih tone, tujuan tampilan, dan intensitas untuk melihat penjelasan di sini.';

        // ==========================
        // SIMULASI PENCAMPURAN
        // ==========================
        function applyMix() {
            const toneSelect = document.getElementById('toneSelect');
            const goalSelect = document.getElementById('goalSelect');
            const intensityRange = document.getElementById('intensityRange');
            const preview = document.getElementById('previewBox');
            const result = document.getElementById('resultText');

            const tone = toneSelect.value;
            const goal = goalSelect.value;
            const intensity = Number(intensityRange.value || 2);

            if (!tone) {
                result.textContent = 'Pilih terlebih dahulu tone campuran pada langkah 1.';
                saveState({
                    simulasi: { tone, goal, intensity, resultText: result.textContent }
                });
                return;
            }

            // ubah tampilan preview
            const info = toneInfo[tone];
            preview.className = 'preview-box ' + (info ? info.className : 'hair-base');

            // susun penjelasan
            let text = info ? info.desc : '';
            if (goal) {
                text += '\n\nTujuan tampilan: ' + goal.toUpperCase() + '. ' + (goalText[goal] || '');
            }

            if (intensity === 1) {
                text += '\n\nIntensitas: halus. Cocok untuk klien pemula atau yang belum berani perubahan besar.';
            } else if (intensity === 2) {
                text += '\n\nIntensitas: sedang. Warna terlihat jelas tapi masih aman untuk situasi formal.';
            } else {
                text += '\n\nIntensitas: berani. Warna dominan dan sangat terlihat, cocok untuk acara khusus atau tampilan fashion.';
            }

            result.textContent = text;

            // simpan ke localStorage
            saveState({
                simulasi: { tone, goal, intensity, resultText: text }
            });
        }

        function resetSimulasi() {
            if (!confirm('Yakin menghapus pilihan pada simulasi pencampuran?')) return;

            const toneSelect = document.getElementById('toneSelect');
            const goalSelect = document.getElementById('goalSelect');
            const intensityRange = document.getElementById('intensityRange');
            const preview = document.getElementById('previewBox');
            const result = document.getElementById('resultText');

            toneSelect.value = '';
            goalSelect.value = '';
            intensityRange.value = 2;
            preview.className = 'preview-box hair-base';
            result.textContent = DEFAULT_RESULT_TEXT;

            saveState({
                simulasi: {
                    tone: '',
                    goal: '',
                    intensity: 2,
                    resultText: DEFAULT_RESULT_TEXT
                }
            });
        }

        // ==========================
        // LATIHAN KONSEP (q1, q2, q3)
        // ==========================
        function cekLatihan() {
            const q1 = document.getElementById('q1').value;
            const q2 = document.getElementById('q2').value;
            const q3 = document.getElementById('q3').value;
            const feed = document.getElementById('feedLatihan');

            if (!q1 || !q2 || !q3) {
                const htmlInfo = '<div class="alert alert-info">Lengkapi dulu semua jawaban nomor 1–3.</div>';
                feed.innerHTML = htmlInfo;
                saveState({
                    latihan: { q1, q2, q3, feedbackHTML: htmlInfo }
                });
                return;
            }

            let benar = 0;
            if (q1 === 'burgundy') benar++;     // dramatis & berani
            if (q2 === 'brunette') benar++;     // natural & elegan
            if (q3 === 'dimension') benar++;    // berdimensi

            let html;
            if (benar === 3) {
                html = '<div class="alert alert-success">✅ Bagus! Kamu sudah memahami hubungan antara tujuan tampilan dan pilihan warna.</div>';
            } else {
                html = '<div class="alert alert-warning">⚠️ Skor kamu ' + benar +
                    '/3. Baca lagi tabel efek warna di atas dan coba perbaiki jawaban.</div>';
            }
            feed.innerHTML = html;

            saveState({
                latihan: { q1, q2, q3, feedbackHTML: html }
            });
        }

        function resetLatihan() {
            if (!confirm('Yakin menghapus jawaban latihan konsep?')) return;

            document.getElementById('q1').value = '';
            document.getElementById('q2').value = '';
            document.getElementById('q3').value = '';
            document.getElementById('feedLatihan').innerHTML = '';

            saveState({
                latihan: {
                    q1: '',
                    q2: '',
                    q3: '',
                    feedbackHTML: ''
                }
            });
        }

        // ==========================
        // PULIHKAN DATA SAAT HALAMAN DIBUKA
        // ==========================
        document.addEventListener('DOMContentLoaded', function () {
            const state = loadState();

            // --- Simulasi ---
            if (state.simulasi) {
                const { tone, goal, intensity, resultText } = state.simulasi;
                const toneSelect = document.getElementById('toneSelect');
                const goalSelect = document.getElementById('goalSelect');
                const intensityRange = document.getElementById('intensityRange');
                const preview = document.getElementById('previewBox');
                const result = document.getElementById('resultText');

                if (toneSelect && typeof tone === 'string') toneSelect.value = tone;
                if (goalSelect && typeof goal === 'string') goalSelect.value = goal;
                if (intensityRange && typeof intensity === 'number') intensityRange.value = intensity;

                if (tone) {
                    // gunakan fungsi applyMix supaya preview & teks konsisten
                    applyMix();
                } else {
                    preview.className = 'preview-box hair-base';
                    result.textContent = resultText || DEFAULT_RESULT_TEXT;
                }
            }

            // --- Latihan konsep ---
            if (state.latihan) {
                const { q1, q2, q3, feedbackHTML } = state.latihan;
                if (typeof q1 === 'string') document.getElementById('q1').value = q1;
                if (typeof q2 === 'string') document.getElementById('q2').value = q2;
                if (typeof q3 === 'string') document.getElementById('q3').value = q3;
                if (feedbackHTML) document.getElementById('feedLatihan').innerHTML = feedbackHTML;
            }
        });
    </script>

</body>

</html>