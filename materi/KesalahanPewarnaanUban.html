<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apersepsi • Single Application</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --navbar-h: 55px;
            --footer-h: 40px;
            --brand: #ff3f8e;
            --sidebar-w: 255px;
            --sidebar-gap: 8px;
            --line: #e5e7eb;
            --abu: #e5e7eb;
            --abu-soft: #f3f4f6;
        }

        html,
        body {
            height: 100%;
        }

        body {
            padding-bottom: var(--footer-h);
            background: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        main.app-shell {
            min-height: calc(100vh - var(--navbar-h) - var(--footer-h));
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid #eee;
        }

        .menu-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .04);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
            font-size: .95rem;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        .no-top-gap>aside,
        .no-top-gap>section {
            padding-top: 0 !important;
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
        }

        .btn-brand:hover {
            color: #fff;
            filter: brightness(.95);
        }

        .materi-card .card-header {
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: .5rem 1rem;
        }

        .page-nav {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .page-nav-inner {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: .5rem;
            flex-wrap: wrap;
        }

        /* Mobile: sidebar ikut alur */
        @media (max-width: 767.98px) {
            .sidebar-fixed {
                position: static;
                width: 100%;
            }
        }

        /* Desktop: sidebar fixed kiri, konten bergeser & card dipendekkan */
        @media (min-width: 768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }

            .materi-card {
                display: flex;
                flex-direction: column;
                max-height: calc(100dvh - var(--navbar-h) - var(--footer-h) - 90px);
            }

            .materi-card .card-body {
                flex: 1 1 auto;
                min-height: 0;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }
        }

        .flashcard {
            border: 1px solid var(--line);
            border-radius: 8px;
            padding: .75rem;
            cursor: pointer;
            background: #fff;
            transition: background .15s, box-shadow .15s;
        }

        .flashcard.active {
            background: rgba(255, 63, 142, 0.04);
            box-shadow: 0 0 0 1px rgba(255, 63, 142, 0.25);
        }

        .box {
            fill: #fff;
            stroke: #e5e7eb;
            stroke-width: 2;
            rx: 16;
        }

        .line {
            stroke: var(--brand);
            stroke-width: 3;
        }

        .text {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            font-size: 18px;
        }

        .badge-section {
            font-size: .75rem;
            letter-spacing: .08em;
            text-transform: uppercase;
            color: #6b7280;
        }

        .card-konten {
            border-radius: 1rem;
            border: 1px solid var(--abu);
            background: #fff;
        }

        .card-konten-header {
            border-bottom: 1px solid var(--abu);
            background: #fff;
        }

        .btn-outline-brand {
            color: var(--brand);
            border-color: var(--brand);
        }

        .btn-outline-brand:hover {
            color: #fff;
            background: var(--brand);
            border-color: var(--brand);
        }

        .chip {
            cursor: grab;
            user-select: none;
        }

        .chip-pink {
            background: var(--brand) !important;
            color: #fff;
        }

        .dropzone {
            min-height: 70px;
            border-radius: .75rem;
            border: 2px dashed var(--abu);
            background: #fff;
            padding: .5rem;
            transition: background .15s, border-color .15s;
        }

        .dropzone.bg-active {
            background: #ffe6f2;
            border-color: var(--brand);
        }

        .dropzone.correct {
            border-color: #16a34a;
            background: #ecfdf3;
        }

        .dropzone.wrong {
            border-color: #dc2626;
            background: #fef2f2;
        }

        .status-simpan {
            font-size: .8rem;
        }

        .sim-preview {
            border-radius: 1rem;
            background: linear-gradient(90deg, #4b5563, #9ca3af);
            height: 110px;
            border: 1px solid #d1d5db;
        }

        .sim-preview.rendah {
            filter: brightness(1.05);
        }

        .sim-preview.sedang {
            filter: contrast(1.05);
        }

        .sim-preview.tinggi {
            filter: contrast(1.1) saturate(1.15);
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem; color:var(--brand)"></i>
                <strong>Pewarnaan Rambut</strong> <span class="fw-normal">• Single Application</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            aria-current="page" href="videopengantar.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../evaluasi.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                    <li class="nav-item"><a class="nav-link" href="../peta.html">Peta Konsep</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- MAIN: sidebar + konten -->
    <main class="main-pad app-shell">
        <div class="container-fluid">
            <div class="row g-1 no-top-gap">
                <!-- SIDEBAR -->
                <aside class="col-12 col-md-auto order-1 order-md-0 p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm">
                        <div class="menu-title"><i class="bi bi-journal-bookmark"></i> Single Application</div>
                        <a class="menu-item " aria-current="page" href="videopengantar.html">
                            <i class="bi bi-lightbulb">Video Pengantar</i>
                        </a>
                        <a class="menu-item" aria-current="page" href="SingleApplication.html">
                            <i class="bi bi-lightbulb"></i> Overview Single Application
                        </a>

                        <!-- A. Pewarnaan Rambut Single -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-A" aria-expanded="true"
                            aria-controls="submenu-A">
                            <span class="me-2"><i class="bi bi-droplet-half"></i></span>
                            <span class="flex-grow-1 text-start">A. Pewarnaan Rambut Single</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-A">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanSingleApplication.html">1. Pewarnaan Single
                                        Application</a></li>
                                <li><a class="menu-item py-1" href="CaraMemilihWarna.html">2. Cara Memilih Warna</a>
                                </li>
                                <li><a class="menu-item py-1" href="MemilihWarnaCat.html">3. Memilih Warna Cat</a></li>
                                <li><a class="menu-item py-1" href="KontraindikasiPewarnaan.html">4. Kontraindikasi
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="HalYangDiperhatikan.html">5. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanA.html">6. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- B. Toning -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-B" aria-expanded="true"
                            aria-controls="submenu-B">
                            <span class="me-2"><i class="bi bi-palette"></i></span>
                            <span class="flex-grow-1 text-start">B. Toning</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-B">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="HairToning.html">1. Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="CiriHairToning.html">2. Ciri Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="KeunggulanHairToning.html">3. Keunggulan Hair
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="KosmetikHairToning.html">4. Kosmetik Hair Toning</a>
                                </li>
                                <li><a class="menu-item py-1" href="ProsedurToning.html">5. Prosedur Melakukan
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="HalDiperhatikanToning.html">6. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanB.html">7. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- C. Pewarnaan Uban -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-C" aria-expanded="true"
                            aria-controls="submenu-C">
                            <span class="me-2"><i class="bi bi-person-lines-fill"></i></span>
                            <span class="flex-grow-1 text-start">C. Pewarnaan Uban</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-C">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanUban.html">1. Pewarnaan Uban</a></li>
                                <li><a class="menu-item py-1" href="JenisPewarnaanUban.html">2. Jenis Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="TeknikPewarnaanUban.html">3. Teknik Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="UjiTempel.html">4. Uji Tempel</a></li>
                                <li><a class="menu-item py-1" href="ProsedurKerjaUban.html">5. Prosedur Kerja</a></li>
                                <li><a class="menu-item py-1" href="ReaksiAlergiUban.html">6. Reaksi Alergi</a></li>
                                <li><a class="menu-item py-1 active" href="KesalahanPewarnaanUban.html">7. Kesalahan
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanC.html">8. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- Evaluasi -->
                        <a class="menu-item" href="../evaluasi.html">
                            <i class="bi bi-clipboard-check"></i> Evaluasi
                        </a>
                        <a class="menu-item" href="VideoPentup.html">
                            <i class="bi bi-camera-video"></i> Evaluasi
                        </a>
                    </nav>
                </aside>

                <!-- KONTEN KANAN -->
                <section class="col-12 col-md-9 col-xl-10 content-with-fixed order-2 order-md-0">
                    <div class="card shadow-sm materi-card">
                        <div class="card-header d-flex align-items-center gap-2">
                            <i class="bi bi-lightbulb" style="color:var(--brand); font-size:1.25rem;"></i>
                            <h3 class="h5 mb-0 fw-bold">Video Pengantar
                        </div>

                        <div class="card-body" id="apersepsi-hair-coloring">
                            <div class="card-body">
                                <h1 class="h4 mb-1">Kesalahan dalam Pewarnaan Uban</h1>
                                <p class="text-secondary mb-0">
                                    Pewarnaan uban menantang dan mudah terjadi kesalahan. Gunakan materi dan latihan
                                    interaktif berikut
                                    untuk memahami dan mencegah kesalahan-kesalahan umum.
                                </p>
                            </div>

                            <!-- MATERI + GAMBAR -->
                            <section id="materi" class="mb-4">
                                <div class="card card-konten shadow-sm">
                                    <div
                                        class="card-header card-konten-header d-flex justify-content-between align-items-center">
                                        <span class="badge-section">Materi Inti</span>
                                        <span class="text-secondary small">Sumber: Buku Pewarnaan Rambut SMK/MAK</span>
                                    </div>
                                    <div class="card-body">
                                        <div class="row g-3 mb-3">
                                            <div class="col-md-6">
                                                <img src="/mnt/data/Screenshot 2025-11-23 082832.png"
                                                    class="img-fluid rounded border"
                                                    alt="Teks kesalahan pewarnaan uban 1" />
                                            </div>
                                            <div class="col-md-6">
                                                <img src="/mnt/data/Screenshot 2025-11-23 082859.png"
                                                    class="img-fluid rounded border"
                                                    alt="Teks kesalahan pewarnaan uban 2" />
                                            </div>
                                        </div>

                                        <h2 class="h5">Ringkasan Kesalahan Umum dalam Pewarnaan Uban</h2>
                                        <ul>
                                            <li><strong>Memilih warna yang salah</strong> – terlalu gelap/terlalu terang
                                                sehingga hasil tidak alami.</li>
                                            <li><strong>Tidak mempersiapkan rambut dengan baik</strong> – rambut
                                                kotor/berminyak mengganggu hasil.</li>
                                            <li><strong>Tidak mengikuti petunjuk produk</strong> – salah takaran atau
                                                waktu pengaplikasian.</li>
                                            <li><strong>Tidak melakukan uji alergi</strong> – berisiko menimbulkan
                                                reaksi alergi serius.</li>
                                            <li><strong>Pembagian rambut (parting) kurang tepat</strong> – warna tidak
                                                merata, terutama di bagian belakang.</li>
                                            <li><strong>Waktu proses kurang tepat</strong> – terlalu lama merusak
                                                rambut, terlalu singkat warna tidak optimal.</li>
                                            <li><strong>Mengabaikan perawatan setelah pewarnaan</strong> – rambut cepat
                                                kusam dan rusak.</li>
                                            <li><strong>Mengabaikan uban di akar rambut</strong> – akar tetap terlihat
                                                putih.</li>
                                            <li><strong>Menggunakan produk yang salah</strong> – tidak cocok dengan
                                                jenis rambut/kulit kepala.</li>
                                            <li><strong>Mengabaikan warna awal</strong> – warna target tidak sesuai
                                                karena tidak mempertimbangkan dasar rambut.</li>
                                        </ul>
                                    </div>
                                </div>
                            </section>

                            <!-- LATIHAN 1: PILIH JAWABAN -->
                            <section id="latihan1" class="mb-4">
                                <div class="card card-konten shadow-sm">
                                    <div
                                        class="card-header card-konten-header d-flex justify-content-between align-items-center">
                                        <span class="badge-section">Latihan 1 – Pahami Kesalahan</span>
                                        <span id="statusL1" class="status-simpan text-secondary"></span>
                                    </div>
                                    <div class="card-body">
                                        <p class="text-secondary small">
                                            Pilih jawaban yang paling tepat untuk setiap situasi berikut.
                                        </p>

                                        <div class="mb-3">
                                            <p class="mb-1">
                                                1) Seorang klien mengeluh rambut terasa sangat perih saat proses
                                                pewarnaan. Ternyata hairdresser
                                                tidak melakukan <em>patch test</em> sebelumnya. Kesalahan apa yang
                                                terjadi?
                                            </p>
                                            <select id="l1q1" class="form-select form-select-sm w-auto">
                                                <option value="">-- pilih --</option>
                                                <option value="warna">Memilih warna yang salah</option>
                                                <option value="uji">Tidak melakukan uji alergi</option>
                                                <option value="perawatan">Mengabaikan perawatan setelah pewarnaan
                                                </option>
                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <p class="mb-1">
                                                2) Bagian atas rambut klien terlihat lebih terang dari bagian bawah,
                                                terutama di area belakang kepala.
                                                Kesalahan apa yang paling mungkin?
                                            </p>
                                            <select id="l1q2" class="form-select form-select-sm w-auto">
                                                <option value="">-- pilih --</option>
                                                <option value="parting">Membagi rambut (parting) dengan benar</option>
                                                <option value="prep">Tidak mempersiapkan rambut dengan baik</option>
                                                <option value="waktu">Proses/waktu yang kurang tepat</option>
                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <p class="mb-1">
                                                3) Rambut uban klien kembali terlihat kekuningan beberapa minggu setelah
                                                pewarnaan.
                                                Ternyata ia tidak memakai sampo dan kondisioner khusus rambut diwarnai.
                                            </p>
                                            <select id="l1q3" class="form-select form-select-sm w-auto">
                                                <option value="">-- pilih --</option>
                                                <option value="produk">Menggunakan produk yang salah</option>
                                                <option value="aftercare">Mengabaikan perawatan setelah pewarnaan
                                                </option>
                                                <option value="warnaawal">Mengabaikan warna awal rambut</option>
                                            </select>
                                        </div>

                                        <div class="d-flex flex-wrap gap-2 mb-2">
                                            <button class="btn btn-outline-brand btn-sm" onclick="cekLatihan1()">Cek
                                                Jawaban</button>
                                            <button class="btn btn-outline-brand btn-sm" onclick="saveStateL1()">Simpan
                                                Latihan 1</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                onclick="resetLatihan1()">Reset Latihan 1</button>
                                        </div>
                                        <div id="feedL1" class="small mt-1"></div>
                                    </div>
                                </div>
                            </section>

                            <!-- LATIHAN 2: DRAG & DROP -->
                            <section id="latihan2" class="mb-4">
                                <div class="card card-konten shadow-sm">
                                    <div
                                        class="card-header card-konten-header d-flex justify-content-between align-items-center">
                                        <span class="badge-section">Latihan 2 – Kapan Kesalahan Terjadi?</span>
                                        <span id="statusL2" class="status-simpan text-secondary"></span>
                                    </div>
                                    <div class="card-body">
                                        <p class="text-secondary small mb-2">
                                            Seret setiap kesalahan ke fase yang tepat: <strong>Sebelum</strong>,
                                            <strong>Saat</strong>,
                                            atau <strong>Sesudah</strong> pewarnaan.
                                        </p>

                                        <div id="chipPool" class="d-flex flex-wrap gap-2 mb-3">
                                            <span id="chipA" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="sebelum">
                                                a. Memilih warna yang salah
                                            </span>
                                            <span id="chipB" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="sebelum">
                                                b. Tidak mempersiapkan rambut dengan baik
                                            </span>
                                            <span id="chipC" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="saat">
                                                c. Tidak mengikuti petunjuk penggunaan kosmetik
                                            </span>
                                            <span id="chipD" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="sebelum">
                                                d. Tidak melakukan uji alergi
                                            </span>
                                            <span id="chipE" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="saat">
                                                e. Membagi rambut (parting) dengan kurang tepat
                                            </span>
                                            <span id="chipF" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="saat">
                                                f. Proses/waktu yang kurang tepat
                                            </span>
                                            <span id="chipG" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="sesudah">
                                                g. Mengabaikan perawatan setelah pewarnaan
                                            </span>
                                            <span id="chipH" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="sesudah">
                                                h. Mengabaikan uban di akar rambut
                                            </span>
                                            <span id="chipI" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="sebelum">
                                                i. Menggunakan produk pewarna yang salah
                                            </span>
                                            <span id="chipJ" class="badge chip chip-pink p-2" draggable="true"
                                                data-phase="sebelum">
                                                j. Mengabaikan perubahan warna awal yang diinginkan
                                            </span>
                                        </div>

                                        <div class="row g-3 mb-2">
                                            <div class="col-md-4">
                                                <h6 class="mb-1">Sebelum Pewarnaan</h6>
                                                <div id="zoneSebelum" class="dropzone" data-phase="sebelum">
                                                    <span class="text-secondary small">Letakkan kesalahan yang terjadi
                                                        sebelum proses dimulai.</span>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <h6 class="mb-1">Saat Pewarnaan</h6>
                                                <div id="zoneSaat" class="dropzone" data-phase="saat">
                                                    <span class="text-secondary small">Letakkan kesalahan saat proses
                                                        berlangsung.</span>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <h6 class="mb-1">Sesudah Pewarnaan</h6>
                                                <div id="zoneSesudah" class="dropzone" data-phase="sesudah">
                                                    <span class="text-secondary small">Letakkan kesalahan setelah
                                                        pewarnaan selesai.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex flex-wrap gap-2 mb-2">
                                            <button class="btn btn-outline-brand btn-sm" onclick="cekLatihan2()">Cek
                                                Pengelompokan</button>
                                            <button class="btn btn-outline-brand btn-sm" onclick="saveStateL2()">Simpan
                                                Latihan 2</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                onclick="resetLatihan2()">Reset Latihan 2</button>
                                        </div>
                                        <div id="feedL2" class="small mt-1"></div>
                                    </div>
                                </div>
                            </section>

                            <!-- SIMULASI -->
                            <section id="simulasi" class="mb-5">
                                <div class="card card-konten shadow-sm">
                                    <div
                                        class="card-header card-konten-header d-flex justify-content-between align-items-center">
                                        <span class="badge-section">Simulasi Dampak Kesalahan</span>
                                        <span id="statusSim" class="status-simpan text-secondary"></span>
                                    </div>
                                    <div class="card-body">
                                        <p class="text-secondary small">
                                            Pilih salah satu kesalahan, atur seberapa sering terjadi, lalu lihat
                                            simulasi dampaknya pada hasil
                                            pewarnaan uban.
                                        </p>

                                        <div class="row g-3 mb-3">
                                            <div class="col-md-4">
                                                <label for="simError" class="form-label small fw-semibold">1) Pilih
                                                    jenis kesalahan</label>
                                                <select id="simError" class="form-select form-select-sm">
                                                    <option value="">-- pilih kesalahan --</option>
                                                    <option value="uji">Tidak melakukan uji alergi</option>
                                                    <option value="parting">Parting tidak rapi</option>
                                                    <option value="aftercare">Mengabaikan perawatan setelah pewarnaan
                                                    </option>
                                                    <option value="warnaawal">Mengabaikan warna awal rambut</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label for="simFreq" class="form-label small fw-semibold">2) Seberapa
                                                    sering terjadi?</label>
                                                <input type="range" class="form-range" id="simFreq" min="1" max="3"
                                                    step="1" value="2" />
                                                <div class="d-flex justify-content-between small text-secondary">
                                                    <span>Jarang</span><span>Kadang</span><span>Sering</span>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <label for="simCatatan" class="form-label small fw-semibold">3) Catatan
                                                    hairdresser</label>
                                                <textarea id="simCatatan" class="form-control form-control-sm" rows="3"
                                                    placeholder="Tuliskan apa yang perlu diperbaiki..."></textarea>
                                            </div>
                                        </div>

                                        <div class="row g-3 align-items-center mb-2">
                                            <div class="col-md-5">
                                                <h6 class="mb-1 small fw-semibold">Visual hasil rambut (simulasi)</h6>
                                                <div id="simPreview" class="sim-preview sedang"></div>
                                                <p class="small text-secondary mt-1">
                                                    *Warna/tekstur hanya ilustrasi untuk menggambarkan kualitas hasil,
                                                    bukan foto nyata.
                                                </p>
                                            </div>
                                            <div class="col-md-7">
                                                <h6 class="mb-1 small fw-semibold">Penjelasan Simulasi</h6>
                                                <div id="simResult" class="small border rounded p-3 bg-light">
                                                    Atur pilihan di atas lalu klik <strong>Jalankan Simulasi</strong>
                                                    untuk melihat dampaknya.
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex flex-wrap gap-2">
                                            <button class="btn btn-outline-brand btn-sm"
                                                onclick="runSimulasi()">Jalankan Simulasi</button>
                                            <button class="btn btn-outline-brand btn-sm" onclick="saveStateSim()">Simpan
                                                Simulasi</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                onclick="resetSimulasi()">Reset Simulasi</button>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <!-- TOMBOL NAVIGASI DI BAWAH KONTEN -->
                    <div class="page-nav">
                        <div class="page-nav-inner">
                            <a class="btn btn-outline-secondary" href="ReaksiAlergiUban.html">
                                <i class="bi bi-arrow-left"></i> Sebelumnya
                            </a>
                            <a class="btn btn-brand" href="AyoLakukanC.html">
                                Berikutnya <i class="bi bi-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small">
            <span>SMKS ISFI BANJARMASIN • Hair Coloring</span>
            <span class="text-muted">© 2025 • Single Application</span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const LS_KEY = 'kesalahan_pewarnaan_uban_v1';

        // ------------ UTIL SIMPAN GLOBAL -------------
        function getStateObject() {
            // kumpulkan state dari semua bagian
            const chipParents = {};
            ['chipA', 'chipB', 'chipC', 'chipD', 'chipE', 'chipF', 'chipG', 'chipH', 'chipI', 'chipJ'].forEach(id => {
                const chip = document.getElementById(id);
                if (chip && chip.parentElement) chipParents[id] = chip.parentElement.id || chip.parentElement.dataset.phase || 'chipPool';
            });

            return {
                l1: {
                    q1: document.getElementById('l1q1').value,
                    q2: document.getElementById('l1q2').value,
                    q3: document.getElementById('l1q3').value,
                    feed: document.getElementById('feedL1').innerHTML
                },
                l2: {
                    chipParents,
                    feed: document.getElementById('feedL2').innerHTML
                },
                sim: {
                    error: document.getElementById('simError').value,
                    freq: document.getElementById('simFreq').value,
                    catatan: document.getElementById('simCatatan').value,
                    result: document.getElementById('simResult').innerHTML
                }
            };
        }

        function saveAllState() {
            if (typeof Storage === 'undefined') return;
            const state = getStateObject();
            localStorage.setItem(LS_KEY, JSON.stringify(state));
        }

        function loadState() {
            if (typeof Storage === 'undefined') return;
            const raw = localStorage.getItem(LS_KEY);
            if (!raw) return;
            let state;
            try { state = JSON.parse(raw); } catch (e) { console.error(e); return; }
            if (!state) return;

            // Latihan 1
            if (state.l1) {
                document.getElementById('l1q1').value = state.l1.q1 || '';
                document.getElementById('l1q2').value = state.l1.q2 || '';
                document.getElementById('l1q3').value = state.l1.q3 || '';
                document.getElementById('feedL1').innerHTML = state.l1.feed || '';
            }

            // Latihan 2 – posisikan chip
            if (state.l2 && state.l2.chipParents) {
                Object.keys(state.l2.chipParents).forEach(id => {
                    let destId = state.l2.chipParents[id];
                    let dest = document.getElementById(destId);
                    if (!dest) dest = document.getElementById('chipPool');
                    const chip = document.getElementById(id);
                    if (chip && dest) dest.appendChild(chip);
                });
                document.getElementById('feedL2').innerHTML = state.l2.feed || '';
            }

            // Simulasi
            if (state.sim) {
                document.getElementById('simError').value = state.sim.error || '';
                document.getElementById('simFreq').value = state.sim.freq || 2;
                document.getElementById('simCatatan').value = state.sim.catatan || '';
                document.getElementById('simResult').innerHTML = state.sim.result || document.getElementById('simResult').innerHTML;
                updateSimPreview();
            }
        }

        // ------------ LATIHAN 1 -------------
        function cekLatihan1() {
            const q1 = document.getElementById('l1q1').value;
            const q2 = document.getElementById('l1q2').value;
            const q3 = document.getElementById('l1q3').value;
            const feed = document.getElementById('feedL1');

            if (!q1 || !q2 || !q3) {
                feed.innerHTML = '<span class="text-danger">Isi semua nomor 1–3 terlebih dahulu.</span>';
                return;
            }

            let benar = 0;
            if (q1 === 'uji') benar++;
            if (q2 === 'parting') benar++;
            if (q3 === 'aftercare') benar++;

            if (benar === 3) {
                feed.innerHTML = '<div class="alert alert-success py-1 mb-1">✅ Mantap! Kamu sudah memahami contoh kesalahan utama.</div>';
            } else {
                feed.innerHTML = '<div class="alert alert-warning py-1 mb-1">⚠️ Skor kamu ' + benar + '/3. Baca lagi penjelasan kesalahan di bagian materi, lalu perbaiki jawaban.</div>';
            }
            saveAllState();
        }

        function saveStateL1() {
            saveAllState();
            document.getElementById('statusL1').textContent = '✔ Latihan 1 tersimpan di perangkat ini.';
            setTimeout(() => { document.getElementById('statusL1').textContent = ''; }, 2500);
        }

        function resetLatihan1() {
            document.getElementById('l1q1').value = '';
            document.getElementById('l1q2').value = '';
            document.getElementById('l1q3').value = '';
            document.getElementById('feedL1').innerHTML = '';
            saveAllState();
            document.getElementById('statusL1').textContent = 'Latihan 1 direset.';
            setTimeout(() => { document.getElementById('statusL1').textContent = ''; }, 2500);
        }

        // ------------ LATIHAN 2: DRAG & DROP -------------
        function setupDrag() {
            document.querySelectorAll('.chip').forEach(chip => {
                chip.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('chipId', chip.id);
                });
            });

            document.querySelectorAll('.dropzone, #chipPool').forEach(zone => {
                zone.addEventListener('dragover', e => {
                    e.preventDefault();
                    zone.classList.add('bg-active');
                });
                zone.addEventListener('dragleave', () => zone.classList.remove('bg-active'));
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    zone.classList.remove('bg-active');
                    const id = e.dataTransfer.getData('chipId');
                    const chip = document.getElementById(id);
                    if (chip) {
                        zone.appendChild(chip);
                    }
                    saveAllState();
                });
            });
        }

        function cekLatihan2() {
            const zones = ['zoneSebelum', 'zoneSaat', 'zoneSesudah'];
            let semuaBenar = true;

            zones.forEach(zid => {
                const zone = document.getElementById(zid);
                zone.classList.remove('correct', 'wrong');
                const phase = zone.dataset.phase;
                const chips = zone.querySelectorAll('.chip');
                if (chips.length === 0 && zid !== 'chipPool') {
                    semuaBenar = false;
                    zone.classList.add('wrong');
                    return;
                }
                chips.forEach(chip => {
                    if (chip.dataset.phase !== phase) {
                        semuaBenar = false;
                    }
                });
                if (semuaBenar) zone.classList.add('correct');
                else zone.classList.add('wrong');
            });

            const feed = document.getElementById('feedL2');
            if (semuaBenar) {
                feed.innerHTML = '<div class="alert alert-success py-1 mb-1">✅ Bagus! Kamu dapat membedakan fase kapan setiap kesalahan terjadi.</div>';
            } else {
                feed.innerHTML = '<div class="alert alert-warning py-1 mb-1">⚠️ Masih ada yang kurang tepat. Ingat, beberapa kesalahan terjadi sebelum proses dimulai, ada yang saat proses, dan ada yang setelah pewarnaan.</div>';
            }
            saveAllState();
        }

        function saveStateL2() {
            saveAllState();
            document.getElementById('statusL2').textContent = '✔ Latihan 2 tersimpan.';
            setTimeout(() => { document.getElementById('statusL2').textContent = ''; }, 2500);
        }

        function resetLatihan2() {
            const pool = document.getElementById('chipPool');
            ['chipA', 'chipB', 'chipC', 'chipD', 'chipE', 'chipF', 'chipG', 'chipH', 'chipI', 'chipJ'].forEach(id => {
                const chip = document.getElementById(id);
                if (chip) pool.appendChild(chip);
            });
            ['zoneSebelum', 'zoneSaat', 'zoneSesudah'].forEach(zid => {
                const zone = document.getElementById(zid);
                zone.classList.remove('correct', 'wrong');
            });
            document.getElementById('feedL2').innerHTML = '';
            saveAllState();
            document.getElementById('statusL2').textContent = 'Latihan 2 direset.';
            setTimeout(() => { document.getElementById('statusL2').textContent = ''; }, 2500);
        }

        // ------------ SIMULASI -------------
        function updateSimPreview() {
            const freq = Number(document.getElementById('simFreq').value || 2);
            const box = document.getElementById('simPreview');
            box.classList.remove('rendah', 'sedang', 'tinggi');
            if (freq === 1) box.classList.add('rendah');
            else if (freq === 2) box.classList.add('sedang');
            else box.classList.add('tinggi');
        }

        function runSimulasi() {
            const error = document.getElementById('simError').value;
            const freq = Number(document.getElementById('simFreq').value || 2);
            const note = (document.getElementById('simCatatan').value || '').trim();
            const box = document.getElementById('simResult');

            if (!error) {
                box.innerHTML = '<span class="text-danger">Pilih dulu jenis kesalahan yang ingin disimulasikan.</span>';
                return;
            }

            updateSimPreview();

            let freqText = freq === 1 ? 'jarang' : (freq === 2 ? 'kadang-kadang' : 'sering');
            let base = '';

            if (error === 'uji') {
                base = 'Tanpa uji alergi, semakin sering kesalahan ini terjadi, semakin besar risiko klien mengalami reaksi alergi serius seperti kemerahan, gatal, hingga bengkak.';
            } else if (error === 'parting') {
                base = 'Parting yang tidak rapi membuat distribusi warna tidak merata. Jika dilakukan ' + freqText + ', bagian tertentu (terutama belakang kepala) akan tampak berbeda warna.';
            } else if (error === 'aftercare') {
                base = 'Mengabaikan perawatan setelah pewarnaan menyebabkan warna uban cepat memudar dan rambut terasa kering. Frekuensi kesalahan yang ' + freqText + ' akan membuat klien sering kembali dengan keluhan warna tidak tahan lama.';
            } else if (error === 'warnaawal') {
                base = 'Tidak mempertimbangkan warna awal rambut membuat hasil akhir sering melenceng dari harapan. Misalnya rambut sangat gelap langsung diberi warna terang tanpa proses pendukung.';
            }

            let solusi = 'Solusi: pastikan prosedur konsultasi, pembagian rambut, pemilihan produk, dan perawatan pascawarnaan dilakukan sesuai standar.';

            if (note) solusi += '<br><br><strong>Catatanmu:</strong> ' + note;

            box.innerHTML = '<p class="mb-1"><strong>Dampak:</strong> ' + base + '</p><p class="mb-0"><strong>Perbaikan:</strong> ' + solusi + '</p>';
            saveAllState();
        }

        function saveStateSim() {
            saveAllState();
            document.getElementById('statusSim').textContent = '✔ Simulasi tersimpan.';
            setTimeout(() => { document.getElementById('statusSim').textContent = ''; }, 2500);
        }

        function resetSimulasi() {
            document.getElementById('simError').value = '';
            document.getElementById('simFreq').value = 2;
            document.getElementById('simCatatan').value = '';
            document.getElementById('simResult').innerHTML = 'Atur pilihan di atas lalu klik <strong>Jalankan Simulasi</strong> untuk melihat dampaknya.';
            updateSimPreview();
            saveAllState();
            document.getElementById('statusSim').textContent = 'Simulasi direset.';
            setTimeout(() => { document.getElementById('statusSim').textContent = ''; }, 2500);
        }

        // INIT
        window.addEventListener('DOMContentLoaded', () => {
            setupDrag();
            loadState();
            updateSimPreview();
        });
    </script>
</body>

</html>