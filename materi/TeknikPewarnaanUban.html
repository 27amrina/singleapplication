<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apersepsi ‚Ä¢ Single Application</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --navbar-h: 55px;
            --footer-h: 40px;
            --brand: #ff3f8e;
            --sidebar-w: 255px;
            --sidebar-gap: 8px;
            --line: #e5e7eb;
            --pink: #ff6fae;
            --pink-soft: #ffe6f1;
            --gray: #666666;
            --gray-light: #f2f2f2;
            --white: #ffffff;
            --radius: 16px;
        }

        html,
        body {
            height: 100%;
        }

        body {
            padding-bottom: var(--footer-h);
            background: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        main.app-shell {
            min-height: calc(100vh - var(--navbar-h) - var(--footer-h));
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid #eee;
        }

        .menu-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .04);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
            font-size: .95rem;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        .no-top-gap>aside,
        .no-top-gap>section {
            padding-top: 0 !important;
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
        }

        .btn-brand:hover {
            color: #fff;
            filter: brightness(.95);
        }

        .materi-card .card-header {
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: .5rem 1rem;
        }

        .page-nav {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .page-nav-inner {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: .5rem;
            flex-wrap: wrap;
        }

        /* Mobile: sidebar ikut alur */
        @media (max-width: 767.98px) {
            .sidebar-fixed {
                position: static;
                width: 100%;
            }
        }

        /* Desktop: sidebar fixed kiri, konten bergeser & card dipendekkan */
        @media (min-width: 768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }

            .materi-card {
                display: flex;
                flex-direction: column;
                max-height: calc(100dvh - var(--navbar-h) - var(--footer-h) - 90px);
            }

            .materi-card .card-body {
                flex: 1 1 auto;
                min-height: 0;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }
        }

        .flashcard {
            border: 1px solid var(--line);
            border-radius: 8px;
            padding: .75rem;
            cursor: pointer;
            background: #fff;
            transition: background .15s, box-shadow .15s;
        }

        .flashcard.active {
            background: rgba(255, 63, 142, 0.04);
            box-shadow: 0 0 0 1px rgba(255, 63, 142, 0.25);
        }

        .box {
            fill: #fff;
            stroke: #e5e7eb;
            stroke-width: 2;
            rx: 16;
        }

        .line {
            stroke: var(--brand);
            stroke-width: 3;
        }

        .text {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            font-size: 18px;
        }

        .wrapper {
            max-width: 1000px;
            margin: 0 auto;
            padding: 24px 16px 40px;
        }

        h1,
        h2,
        h3 {
            color: #444;
            margin-top: 0;
        }

        h1 {
            text-align: center;
            margin-bottom: 8px;
        }

        .subtitle {
            text-align: center;
            margin-bottom: 24px;
            font-size: 0.95rem;
            color: #777;
        }

        .card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 18px 18px 14px;
            margin-bottom: 18px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.04);
            border: 1px solid #f3c3da;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 10px;
        }

        .badge {
            background: var(--pink);
            color: var(--white);
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .section-content {
            display: grid;
            grid-template-columns: minmax(0, 2fr) minmax(0, 1.2fr);
            gap: 14px;
            align-items: flex-start;
        }

        .section-text p {
            margin-top: 0;
            margin-bottom: 8px;
            line-height: 1.5;
            font-size: 0.94rem;
        }

        .section-text ul {
            margin: 4px 0 8px 18px;
            padding-left: 0;
            font-size: 0.93rem;
        }

        .section-text li {
            margin-bottom: 4px;
        }

        .section-image-wrapper {
            background: var(--pink-soft);
            border-radius: var(--radius);
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
            color: #555;
        }

        .section-image-wrapper img {
            max-width: 100%;
            border-radius: 12px;
            display: block;
            margin: 0 auto 6px;
        }

        .activity {
            background: var(--pink-soft);
            border-radius: var(--radius);
            padding: 10px 12px;
            margin-top: 10px;
            border: 1px dashed #f09ec8;
            font-size: 0.9rem;
        }

        .activity-title {
            font-weight: 600;
            margin-bottom: 6px;
            color: #444;
        }

        .activity label {
            display: block;
            margin-bottom: 4px;
            cursor: pointer;
        }

        .activity textarea {
            width: 100%;
            min-height: 60px;
            resize: vertical;
            padding: 6px 8px;
            border-radius: 10px;
            border: 1px solid #e5a6c7;
            font-family: inherit;
            font-size: 0.9rem;
            outline: none;
        }

        .activity textarea:focus {
            border-color: var(--pink);
            box-shadow: 0 0 0 2px rgba(255, 111, 174, 0.25);
        }

        .btn-row {
            margin-top: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        button {
            border-radius: 999px;
            padding: 6px 14px;
            border: none;
            cursor: pointer;
            font-size: 0.86rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            letter-spacing: 0.01em;
        }

        .btn-primary {
            background: var(--pink);
            color: var(--white);
        }

        .btn-primary:hover {
            filter: brightness(1.05);
        }

        .btn-secondary {
            background: #dddddd;
            color: #444444;
        }

        .btn-secondary:hover {
            filter: brightness(0.97);
        }

        .feedback {
            margin-top: 6px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .feedback.correct {
            color: #2e7d32;
        }

        .feedback.wrong {
            color: #c62828;
        }

        .feedback.info {
            color: #555;
        }

        .simulator-selects {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
            gap: 10px;
            margin-top: 6px;
        }

        .simulator-selects label {
            font-size: 0.86rem;
            font-weight: 500;
            display: block;
            margin-bottom: 2px;
        }

        select {
            width: 100%;
            padding: 6px 8px;
            border-radius: 999px;
            border: 1px solid #e5a6c7;
            font-size: 0.9rem;
            outline: none;
            background: var(--white);
        }

        select:focus {
            border-color: var(--pink);
            box-shadow: 0 0 0 2px rgba(255, 111, 174, 0.25);
        }

        .sim-result {
            margin-top: 8px;
            padding: 8px 10px;
            border-radius: 12px;
            background: var(--gray-light);
            font-size: 0.9rem;
        }

        .sim-result strong {
            color: #444;
        }

        /* SIMULASI VISUAL */
        .hair-sim {
            margin-top: 10px;
            padding: 8px 10px;
            border-radius: 14px;
            background: #faf6f8;
            border: 1px solid #f3c3da;
        }

        .hair-row-label {
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 4px;
            margin-bottom: 2px;
            color: #555;
        }

        .strand-row {
            display: flex;
            gap: 4px;
            margin-bottom: 6px;
            margin-top: 2px;
        }

        .strand {
            width: 14px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid #bbbbbb;
            background: #dcdcdc;
        }

        .strand.uban {
            background: #c5c5c5;
        }

        .strand.alami {
            background: #e3c5a5;
            /* coklat natural lembut */
        }

        .strand.colored {
            background: #ffb3d1;
            /* pink lembut */
        }

        .strand.dark {
            background: #a67b5b;
            /* lowlight lebih gelap */
        }

        .hair-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 4px;
            font-size: 0.8rem;
        }

        .legend-item {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .legend-box {
            width: 14px;
            height: 14px;
            border-radius: 6px;
            border: 1px solid #bbb;
        }

        .legend-box.uban {
            background: #c5c5c5;
        }

        .legend-box.alami {
            background: #e3c5a5;
        }

        .legend-box.colored {
            background: #ffb3d1;
        }

        .legend-box.dark {
            background: #a67b5b;
        }

        @media (max-width: 720px) {
            .section-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem; color:var(--brand)"></i>
                <strong>Pewarnaan Rambut</strong> <span class="fw-normal">‚Ä¢ Single Application</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            aria-current="page" href="videopengantar.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../latihan.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                    <li class="nav-item"><a class="nav-link" href="../peta.html">Peta Konsep</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- MAIN: sidebar + konten -->
    <main class="main-pad app-shell">
        <div class="container-fluid">
            <div class="row g-1 no-top-gap">
                <!-- SIDEBAR -->
                <aside class="col-12 col-md-auto order-1 order-md-0 p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm">
                        <div class="menu-title"><i class="bi bi-journal-bookmark"></i> Single Application</div>
                        <a class="menu-item" aria-current="page" href="videopengantar.html">
                            <i class="bi bi-lightbulb">Video Pengantar</i>
                        </a>
                        <a class="menu-item" aria-current="page" href="SingleApplication.html">
                            <i class="bi bi-lightbulb"></i> Overview Single Application
                        </a>

                        <!-- A. Pewarnaan Rambut Single -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-A" aria-expanded="true"
                            aria-controls="submenu-A">
                            <span class="me-2"><i class="bi bi-droplet-half"></i></span>
                            <span class="flex-grow-1 text-start">A. Pewarnaan Rambut Single</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-A">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanSingleApplication.html">1. Pewarnaan Single
                                        Application</a></li>
                                <li><a class="menu-item py-1" href="CaraMemilihWarna.html">2. Cara Memilih Warna</a>
                                </li>
                                <li><a class="menu-item py-1" href="MemilihWarnaCat.html">3. Memilih Warna Cat</a></li>
                                <li><a class="menu-item py-1" href="KontraindikasiPewarnaan.html">4. Kontraindikasi
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="HalYangDiperhatikan.html">5. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanA.html">6. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- B. Toning -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-B" aria-expanded="true"
                            aria-controls="submenu-B">
                            <span class="me-2"><i class="bi bi-palette"></i></span>
                            <span class="flex-grow-1 text-start">B. Toning</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-B">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="HairToning.html">1. Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="CiriHairToning.html">2. Ciri Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="KeunggulanHairToning.html">3. Keunggulan Hair
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="KosmetikHairToning.html">4. Kosmetik Hair Toning</a>
                                </li>
                                <li><a class="menu-item py-1" href="ProsedurToning.html">5. Prosedur Melakukan
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="HalDiperhatikanToning.html">6. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanB.html">7. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- C. Pewarnaan Uban -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-C" aria-expanded="true"
                            aria-controls="submenu-C">
                            <span class="me-2"><i class="bi bi-person-lines-fill"></i></span>
                            <span class="flex-grow-1 text-start">C. Pewarnaan Uban</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-C">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanUban.html">1. Pewarnaan Uban</a></li>
                                <li><a class="menu-item py-1" href="JenisPewarnaanUban.html">2. Jenis Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1 active" href="TeknikPewarnaanUban.html">3. Teknik
                                        Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="UjiTempel.html">4. Uji Tempel</a></li>
                                <li><a class="menu-item py-1" href="ProsedurKerjaUban.html">5. Prosedur Kerja</a></li>
                                <li><a class="menu-item py-1" href="ReaksiAlergiUban.html">6. Reaksi Alergi</a></li>
                                <li><a class="menu-item py-1" href="KesalahanPewarnaanUban.html">7. Kesalahan
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanC.html">8. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- Evaluasi -->
                        <a class="menu-item" href="../evaluasi.html">
                            <i class="bi bi-clipboard-check"></i> Evaluasi
                        </a>
                        <a class="menu-item" href="VideoPentup.html">
                            <i class="bi bi-camera-video"></i> Evaluasi
                        </a>
                    </nav>
                </aside>

                <!-- KONTEN KANAN -->
                <section class="col-12 col-md-9 col-xl-10 content-with-fixed order-2 order-md-0">
                    <div class="card shadow-sm materi-card">
                        <div class="card-header d-flex align-items-center gap-2">
                            <i class="bi bi-lightbulb" style="color:var(--brand); font-size:1.25rem;"></i>
                            <h3 class="h5 mb-0 fw-bold">Video Pengantar
                        </div>

                        <div class="card-body" id="apersepsi-hair-coloring">
                            <h1>3. Teknik Pewarnaan Rambut Uban</h1>
                            <div class="subtitle">
                                Baca materi, jawab pertanyaan, lalu gunakan simulasi di akhir untuk melihat pilihan
                                teknik
                                dan gambaran visual sebelum‚Äìsesudah pewarnaan. Jawabanmu tersimpan di perangkat
                                (localStorage).
                            </div>

                            <!-- A. FULL COVERAGE -->
                            <section class="card section" id="section-full-coverage">
                                <div class="section-header">
                                    <div class="section-title">a. Full Coverage (Pewarnaan Penuh)</div>
                                    <div class="badge">Langkah Dasar</div>
                                </div>

                                <div class="section-content">
                                    <div class="section-text">
                                        <p>
                                            Teknik ini mewarnai <strong>seluruh bagian rambut</strong> dari akar hingga
                                            ujung
                                            sehingga uban tertutup sepenuhnya. Biasanya digunakan pewarna permanen atau
                                            semi permanen untuk mendapatkan warna yang rata dan tahan lama.
                                        </p>
                                        <ul>
                                            <li>Rambut diwarnai merata di seluruh kepala.</li>
                                            <li>Cocok untuk klien dengan uban yang banyak dan ingin tampilan warna
                                                solid.</li>
                                            <li>Perlu perawatan rutin di akar saat rambut baru tumbuh.</li>
                                        </ul>

                                        <div class="activity">
                                            <div class="activity-title">Aktivitas 1: Pahami Full Coverage</div>
                                            <p>Pilih pernyataan yang paling tepat mengenai teknik full coverage.</p>
                                            <label>
                                                <input type="radio" name="quiz-a" value="seluruh-rambut"
                                                    data-key="quiz-a" />
                                                Mewarnai seluruh rambut dari akar sampai ujung untuk menutup uban.
                                            </label>
                                            <label>
                                                <input type="radio" name="quiz-a" value="sebagian-rambut"
                                                    data-key="quiz-a" />
                                                Hanya mewarnai beberapa helai rambut sebagai efek garis.
                                            </label>
                                            <label>
                                                <input type="radio" name="quiz-a" value="akar-saja" data-key="quiz-a" />
                                                Hanya mewarnai bagian akar rambut saja.
                                            </label>

                                            <div class="btn-row">
                                                <button class="btn-primary" type="button"
                                                    onclick="saveSection('section-full-coverage')">üíæ Simpan</button>
                                                <button class="btn-secondary" type="button"
                                                    onclick="resetSection('section-full-coverage')">‚ôª Reset</button>
                                            </div>
                                            <div class="feedback"></div>
                                        </div>
                                    </div>

                                    <div class="section-image-wrapper">
                                        <img src="../img/6,4.png" alt="Contoh full coverage dan halaman materi 1" />
                                        <div>Ilustrasi full coverage dari materi asli.</div>
                                    </div>
                                </div>
                            </section>

                            <!-- B. HIGHLIGHTING -->
                            <section class="card section" id="section-highlighting">
                                <div class="section-header">
                                    <div class="section-title">b. Highlighting</div>
                                    <div class="badge">Dimensi Warna</div>
                                </div>

                                <div class="section-content">
                                    <div class="section-text">
                                        <p>
                                            Highlighting berarti mewarnai <strong>sebagian helai rambut</strong> dengan
                                            warna yang
                                            lebih terang untuk menciptakan efek alami dan berdimensi. Uban dapat
                                            tersamar
                                            karena tercampur dengan warna dasar rambut.
                                        </p>
                                        <ul>
                                            <li>Memberi efek garis-garis terang pada rambut.</li>
                                            <li>Bisa dibuat dengan bantuan foil, topi highlight, atau teknik lain.</li>
                                            <li>Cocok untuk klien yang ingin menutupi uban secara halus dan modern.</li>
                                        </ul>

                                        <div class="activity">
                                            <div class="activity-title">Aktivitas 2: Cek Pemahaman Highlight</div>
                                            <p>Kapan highlighting lebih baik dibanding full coverage?</p>
                                            <label>
                                                <input type="radio" name="quiz-b" value="ingin-dimensi"
                                                    data-key="quiz-b" />
                                                Saat klien ingin efek warna bertingkat dan uban tampak lebih menyatu.
                                            </label>
                                            <label>
                                                <input type="radio" name="quiz-b" value="ingin-warna-solid"
                                                    data-key="quiz-b" />
                                                Saat klien ingin warna rambut solid tanpa efek garis.
                                            </label>
                                            <label>
                                                <input type="radio" name="quiz-b" value="tidak-ada-uban"
                                                    data-key="quiz-b" />
                                                Saat rambut klien tidak memiliki uban sama sekali.
                                            </label>

                                            <div class="btn-row">
                                                <button class="btn-primary" type="button"
                                                    onclick="saveSection('section-highlighting')">üíæ Simpan</button>
                                                <button class="btn-secondary" type="button"
                                                    onclick="resetSection('section-highlighting')">‚ôª Reset</button>
                                            </div>
                                            <div class="feedback"></div>
                                        </div>
                                    </div>

                                    <div class="section-image-wrapper">
                                        <img src="../img/6,5.png" alt="Ilustrasi highlighting pada halaman materi 1" />
                                        <div>Di buku, highlighting ditunjukkan dengan gambar profil dan hasil rambut
                                            ber-highlight.</div>
                                    </div>
                                </div>
                            </section>

                            <!-- C. LOWLIGHTS -->
                            <section class="card section" id="section-lowlights">
                                <div class="section-header">
                                    <div class="section-title">c. Lowlights</div>
                                    <div class="badge">Pendalaman Warna</div>
                                </div>

                                <div class="section-content">
                                    <div class="section-text">
                                        <p>
                                            Lowlights kebalikan dari highlight. Rambut diberi <strong>garis-garis warna
                                                lebih gelap</strong>
                                            untuk menambah kedalaman dan kontras, namun tetap terlihat lembut dan tidak
                                            berlebihan.
                                        </p>
                                        <ul>
                                            <li>Mengurangi kesan terlalu terang pada rambut yang sudah di-highlight.
                                            </li>
                                            <li>Dapat dikombinasikan dengan highlight untuk hasil yang seimbang.</li>
                                            <li>Membuat uban tampak lebih menyatu dengan warna gelap di sekitarnya.</li>
                                        </ul>

                                        <div class="activity">
                                            <div class="activity-title">Aktivitas 3: Bandingkan Highlight & Lowlights
                                            </div>
                                            <p>Tuliskan perbedaan utama antara highlight dan lowlights menurutmu.</p>
                                            <textarea data-key="catatan-c"
                                                placeholder="Contoh: highlight lebih terang, lowlights lebih gelap..."></textarea>

                                            <div class="btn-row">
                                                <button class="btn-primary" type="button"
                                                    onclick="saveSection('section-lowlights')">üíæ Simpan</button>
                                                <button class="btn-secondary" type="button"
                                                    onclick="resetSection('section-lowlights')">‚ôª Reset</button>
                                            </div>
                                            <div class="feedback info"></div>
                                        </div>
                                    </div>

                                    <div class="section-image-wrapper">
                                        <img src="../img/6,7.png" alt="Contoh lowlights pada halaman materi 2" />
                                        <div>Gambar rambut dengan lowlight dari materi asli.</div>
                                    </div>
                                </div>
                            </section>

                            <!-- D. BALAYAGE -->
                            <section class="card section" id="section-balayage">
                                <div class="section-header">
                                    <div class="section-title">d. Balayage</div>
                                    <div class="badge">Gradasi Alami</div>
                                </div>

                                <div class="section-content">
                                    <div class="section-text">
                                        <p>
                                            Balayage adalah teknik mewarnai dengan sapuan tangan langsung tanpa foil
                                            atau topi.
                                            Warna dibuat bergeser secara <strong>gradasi lembut</strong> dari gelap ke
                                            terang sehingga
                                            hasilnya sangat alami.
                                        </p>
                                        <ul>
                                            <li>Transisi warna tidak kaku, cocok untuk gaya santai.</li>
                                            <li>Uban dapat tersamarkan di antara gradasi warna.</li>
                                            <li>Perawatan ulang akar biasanya lebih jarang dibanding full coverage.</li>
                                        </ul>

                                        <div class="activity">
                                            <div class="activity-title">Aktivitas 4: Balayage & Kesan Alami</div>
                                            <p>Menurutmu, kenapa balayage cocok untuk klien yang tidak ingin warna
                                                terlalu mencolok?</p>
                                            <textarea data-key="catatan-d"
                                                placeholder="Tuliskan pendapatmu di sini..."></textarea>

                                            <div class="btn-row">
                                                <button class="btn-primary" type="button"
                                                    onclick="saveSection('section-balayage')">üíæ Simpan</button>
                                                <button class="btn-secondary" type="button"
                                                    onclick="resetSection('section-balayage')">‚ôª Reset</button>
                                            </div>
                                            <div class="feedback info"></div>
                                        </div>
                                    </div>

                                    <div class="section-image-wrapper">
                                        <img src="../img/6,8.png" alt="Ilustrasi balayage pada halaman materi 2" />
                                        <div>Di buku, balayage ditunjukkan dengan gambar kepala dan area yang diberi
                                            bleach.</div>
                                    </div>
                                </div>
                            </section>

                            <!-- E. ROOT TOUCH-UP -->
                            <section class="card section" id="section-root-touchup">
                                <div class="section-header">
                                    <div class="section-title">e. Root Touch-Up</div>
                                    <div class="badge">Perawatan Akar</div>
                                </div>

                                <div class="section-content">
                                    <div class="section-text">
                                        <p>
                                            Root touch-up adalah teknik mewarnai <strong>hanya bagian akar
                                                rambut</strong> yang tumbuh baru
                                            dan beruban, agar warnanya kembali menyatu dengan rambut yang sudah diwarnai
                                            sebelumnya.
                                        </p>
                                        <ul>
                                            <li>Biasanya dilakukan beberapa minggu setelah pewarnaan awal.</li>
                                            <li>Lebih hemat waktu dan produk dibanding mewarnai seluruh rambut lagi.
                                            </li>
                                            <li>Penting untuk klien dengan pertumbuhan uban yang cepat.</li>
                                        </ul>

                                        <div class="activity">
                                            <div class="activity-title">Aktivitas 5: Akar atau Seluruh Rambut?</div>
                                            <p>Pilih kondisi yang <em>paling cocok</em> untuk root touch-up.</p>
                                            <label>
                                                <input type="radio" name="quiz-e" value="akar-uban" data-key="quiz-e" />
                                                Rambut sudah pernah diwarnai, muncul uban baru hanya di bagian akar.
                                            </label>
                                            <label>
                                                <input type="radio" name="quiz-e" value="belum-pernah-warna"
                                                    data-key="quiz-e" />
                                                Rambut belum pernah diwarnai sama sekali dan penuh uban.
                                            </label>
                                            <label>
                                                <input type="radio" name="quiz-e" value="ingin-highlight"
                                                    data-key="quiz-e" />
                                                Klien ingin menambah highlight untuk efek dimensi.</label>

                                            <div class="btn-row">
                                                <button class="btn-primary" type="button"
                                                    onclick="saveSection('section-root-touchup')">üíæ Simpan</button>
                                                <button class="btn-secondary" type="button"
                                                    onclick="resetSection('section-root-touchup')">‚ôª Reset</button>
                                            </div>
                                            <div class="feedback"></div>
                                        </div>
                                    </div>

                                    <div class="section-image-wrapper">
                                        <img src="../img/6,9.png" alt="Ilustrasi root touch-up di bagian akar" />
                                        <div>Halaman materi menunjukkan pewarnaan yang hanya difokuskan pada area akar.
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- F. GRAY BLENDING -->
                            <section class="card section" id="section-gray-blending">
                                <div class="section-header">
                                    <div class="section-title">f. Gray Blending (Pencampuran Uban)</div>
                                    <div class="badge">Transisi Halus</div>
                                </div>

                                <div class="section-content">
                                    <div class="section-text">
                                        <p>
                                            Gray blending menggunakan warna yang <strong>mirip dengan warna alami
                                                rambut</strong>
                                            lalu mencampurkannya dengan uban. Tujuannya bukan menghilangkan uban 100%,
                                            tetapi membuat transisi antara rambut berwarna dan uban menjadi halus.
                                        </p>
                                        <ul>
                                            <li>Uban tetap terlihat, tetapi lebih lembut dan menyatu.</li>
                                            <li>Cocok untuk klien yang ingin tampilan dewasa dan natural.</li>
                                            <li>Perawatan ulang biasanya lebih fleksibel karena batas warna tidak
                                                terlalu jelas.</li>
                                        </ul>

                                        <div class="activity">
                                            <div class="activity-title">Aktivitas 6: Cocokkah Gray Blending?</div>
                                            <p>Menurutmu, klien dengan karakter seperti apa yang paling cocok memakai
                                                gray blending?</p>
                                            <textarea data-key="catatan-f"
                                                placeholder="Tuliskan karakter/keinginan klien yang menurutmu cocok..."></textarea>

                                            <div class="btn-row">
                                                <button class="btn-primary" type="button"
                                                    onclick="saveSection('section-gray-blending')">üíæ Simpan</button>
                                                <button class="btn-secondary" type="button"
                                                    onclick="resetSection('section-gray-blending')">‚ôª Reset</button>
                                            </div>
                                            <div class="feedback info"></div>
                                        </div>
                                    </div>

                                    <div class="section-image-wrapper">
                                        <img src="../img/6,10.png"
                                            alt="Ilustrasi gray blending pada halaman materi 3" />
                                        <div>Gambar menunjukkan pembagian area warna untuk mencampur uban dengan rambut
                                            alami.</div>
                                    </div>
                                </div>
                            </section>

                            <!-- SIMULASI 1: MEMILIH TEKNIK -->
                            <section class="card section" id="section-simulator">
                                <div class="section-header">
                                    <div class="section-title">Simulasi: Pilih Teknik Pewarnaan Uban</div>
                                    <div class="badge">Latihan Praktik</div>
                                </div>

                                <div class="section-text">
                                    <p>
                                        Gunakan simulasi ini untuk memilih teknik yang paling tepat sesuai kondisi
                                        klien.
                                        Jawaban dan pilihanmu bisa disimpan dan di-reset kapan saja.
                                    </p>

                                    <div class="activity">
                                        <div class="activity-title">Langkah 1: Isi Kondisi Klien</div>

                                        <div class="simulator-selects">
                                            <div>
                                                <label for="sim-uban">Persentase uban</label>
                                                <select id="sim-uban" data-key="sim-uban">
                                                    <option value="">‚Äî Pilih ‚Äî</option>
                                                    <option value="sedikit">&lt; 30% (sedikit)</option>
                                                    <option value="sedang">30‚Äì60% (sedang)</option>
                                                    <option value="banyak">&gt; 60% (banyak)</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label for="sim-gaya">Keinginan gaya warna</label>
                                                <select id="sim-gaya" data-key="sim-gaya">
                                                    <option value="">‚Äî Pilih ‚Äî</option>
                                                    <option value="alami">Sangat alami, tidak mencolok</option>
                                                    <option value="dimensi">Ingin efek dimensi/garis-garis</option>
                                                    <option value="solid">Ingin warna solid menyatu</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label for="sim-perawatan">Frekuensi perawatan yang diinginkan</label>
                                                <select id="sim-perawatan" data-key="sim-perawatan">
                                                    <option value="">‚Äî Pilih ‚Äî</option>
                                                    <option value="jarang">Ingin perawatan jarang</option>
                                                    <option value="sedang">Tidak masalah per 1‚Äì2 bulan</option>
                                                    <option value="sering">Tidak masalah per 3‚Äì4 minggu</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="btn-row">
                                            <button class="btn-primary" type="button" onclick="runSimulation()">üíæ
                                                Simulasikan &amp; Simpan</button>
                                            <button class="btn-secondary" type="button"
                                                onclick="resetSection('section-simulator')">‚ôª Reset Simulasi</button>
                                        </div>

                                        <div class="sim-result" id="sim-result">
                                            Isi pilihan di atas, lalu klik <strong>‚ÄúSimulasikan &amp; Simpan‚Äù</strong>
                                            untuk melihat rekomendasi teknik.
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- SIMULASI 2: VISUAL PEWARNAAN -->
                            <section class="card section" id="section-color-sim">
                                <div class="section-header">
                                    <div class="section-title">Simulasi Visual Pewarnaan Rambut Uban</div>
                                    <div class="badge">Sebelum &amp; Sesudah</div>
                                </div>

                                <div class="section-text">
                                    <p>
                                        Simulasi ini menggambarkan <strong>pola uban dan warna rambut</strong> sebelum
                                        dan sesudah
                                        penerapan teknik pewarnaan pada materi (full coverage, highlight, lowlights,
                                        balayage,
                                        root touch-up, dan gray blending).
                                    </p>

                                    <div class="activity">
                                        <div class="activity-title">Langkah 2: Atur Kondisi &amp; Teknik</div>

                                        <div class="simulator-selects">
                                            <div>
                                                <label for="sim2-uban">Jumlah uban sebelum pewarnaan</label>
                                                <select id="sim2-uban" data-key="sim2-uban">
                                                    <option value="">‚Äî Pilih ‚Äî</option>
                                                    <option value="sedikit">&lt; 30% (sedikit)</option>
                                                    <option value="sedang">30‚Äì60% (sedang)</option>
                                                    <option value="banyak">&gt; 60% (banyak)</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label for="sim2-teknik">Teknik pewarnaan yang digunakan</label>
                                                <select id="sim2-teknik" data-key="sim2-teknik">
                                                    <option value="">‚Äî Pilih teknik ‚Äî</option>
                                                    <option value="full">a. Full Coverage</option>
                                                    <option value="highlight">b. Highlighting</option>
                                                    <option value="lowlights">c. Lowlights</option>
                                                    <option value="balayage">d. Balayage</option>
                                                    <option value="root">e. Root Touch-Up</option>
                                                    <option value="gray">f. Gray Blending</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="hair-sim">
                                            <div class="hair-row-label">Sebelum Pewarnaan</div>
                                            <div class="strand-row" id="hair-before">
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                            </div>

                                            <div class="hair-row-label">Sesudah Pewarnaan</div>
                                            <div class="strand-row" id="hair-after">
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                                <span class="strand"></span>
                                            </div>

                                            <div class="hair-legend">
                                                <span class="legend-item">
                                                    <span class="legend-box uban"></span> Uban
                                                </span>
                                                <span class="legend-item">
                                                    <span class="legend-box alami"></span> Rambut alami
                                                </span>
                                                <span class="legend-item">
                                                    <span class="legend-box colored"></span> Rambut diwarnai (hasil
                                                    pewarnaan)
                                                </span>
                                                <span class="legend-item">
                                                    <span class="legend-box dark"></span> Lowlights / warna lebih gelap
                                                </span>
                                            </div>
                                        </div>

                                        <div class="btn-row">
                                            <button class="btn-primary" type="button" onclick="runColorSimulation()">üíæ
                                                Simulasikan &amp; Simpan</button>
                                            <button class="btn-secondary" type="button"
                                                onclick="resetSection('section-color-sim')">‚ôª Reset Visual</button>
                                        </div>

                                        <div class="sim-result" id="sim2-result">
                                            Pilih jumlah uban dan teknik pewarnaan, lalu klik <strong>‚ÄúSimulasikan &amp;
                                                Simpan‚Äù</strong>
                                            untuk melihat perubahan pola uban berdasarkan materi.
                                        </div>
                                    </div>
                                </div>
                            </section>

                        </div>
                    </div>

                    <!-- TOMBOL NAVIGASI DI BAWAH KONTEN -->
                    <div class="page-nav">
                        <div class="page-nav-inner">
                            <a class="btn btn-outline-secondary" href="JenisPewarnaanUban.html">
                                <i class="bi bi-arrow-left"></i> Sebelumnya
                            </a>
                            <a class="btn btn-brand" href="UjiTempel.html">
                                Berikutnya <i class="bi bi-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small">
            <span>SMKS ISFI BANJARMASIN ‚Ä¢ Hair Coloring</span>
            <span class="text-muted">¬© 2025 ‚Ä¢ Single Application</span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const STORAGE_PREFIX = "haircolor_technique_";

        // Ambil semua data input di dalam satu section
        function collectSectionData(sectionElement) {
            const data = {};
            const elements = sectionElement.querySelectorAll("[data-key]");

            elements.forEach(el => {
                const key = el.dataset.key;
                if (!key) return;

                if (el.tagName === "TEXTAREA" || el.tagName === "SELECT") {
                    data[key] = el.value;
                } else if (el.type === "radio") {
                    if (!data.hasOwnProperty(key)) data[key] = null;
                    if (el.checked) data[key] = el.value;
                } else if (el.type === "checkbox") {
                    data[key] = el.checked;
                } else {
                    data[key] = el.value;
                }
            });

            return data;
        }

        // Kembalikan data ke form section
        function restoreSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (!section) return;

            const raw = localStorage.getItem(STORAGE_PREFIX + sectionId);
            if (!raw) return;

            let data;
            try {
                data = JSON.parse(raw);
            } catch (e) {
                return;
            }

            const elements = section.querySelectorAll("[data-key]");
            elements.forEach(el => {
                const key = el.dataset.key;
                if (!key || !(key in data)) return;
                const value = data[key];

                if (el.tagName === "TEXTAREA" || el.tagName === "SELECT") {
                    el.value = value;
                } else if (el.type === "radio") {
                    el.checked = el.value === value;
                } else if (el.type === "checkbox") {
                    el.checked = !!value;
                } else {
                    el.value = value;
                }
            });

            showFeedback(sectionId);

            if (sectionId === "section-simulator") {
                updateSimResultFromStored(data);
            } else if (sectionId === "section-color-sim") {
                applyColorSimulationFromStored(data);
            }
        }

        // Simpan section ke localStorage
        function saveSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (!section) return;

            const data = collectSectionData(section);
            localStorage.setItem(STORAGE_PREFIX + sectionId, JSON.stringify(data));
            showFeedback(sectionId);
        }

        // Reset section & hapus localStorage
        function resetSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (!section) return;

            const elements = section.querySelectorAll("[data-key]");
            elements.forEach(el => {
                if (el.tagName === "TEXTAREA" || el.tagName === "SELECT") {
                    el.value = "";
                } else if (el.type === "radio" || el.type === "checkbox") {
                    el.checked = false;
                } else {
                    el.value = "";
                }
            });

            localStorage.removeItem(STORAGE_PREFIX + sectionId);

            const fb = section.querySelector(".feedback");
            if (fb) {
                fb.textContent = "";
                fb.className = "feedback";
            }

            if (sectionId === "section-simulator") {
                document.getElementById("sim-result").innerHTML =
                    'Isi pilihan di atas, lalu klik <strong>‚ÄúSimulasikan &amp; Simpan‚Äù</strong> untuk melihat rekomendasi teknik.';
            }

            if (sectionId === "section-color-sim") {
                initHairSimulationDefault();
                document.getElementById("sim2-result").innerHTML =
                    'Pilih jumlah uban dan teknik pewarnaan, lalu klik <strong>‚ÄúSimulasikan &amp; Simpan‚Äù</strong> untuk melihat perubahan pola uban berdasarkan materi.';
            }
        }

        // Ambil nilai radio tertentu
        function getRadioValue(name) {
            const checked = document.querySelector('input[name="' + name + '"]:checked');
            return checked ? checked.value : null;
        }

        // Tampilkan feedback sesuai section
        function showFeedback(sectionId) {
            const section = document.getElementById(sectionId);
            if (!section) return;
            const fb = section.querySelector(".feedback");
            if (!fb) return;

            fb.className = "feedback"; // reset kelas

            if (sectionId === "section-full-coverage") {
                const val = getRadioValue("quiz-a");
                if (!val) {
                    fb.textContent = "Pilih dulu jawabanmu, ya.";
                    fb.classList.add("info");
                } else if (val === "seluruh-rambut") {
                    fb.textContent = "Benar! Full coverage menutup uban dengan mewarnai seluruh rambut.";
                    fb.classList.add("correct");
                } else {
                    fb.textContent = "Belum tepat. Full coverage selalu mewarnai seluruh rambut, bukan hanya sebagian.";
                    fb.classList.add("wrong");
                }
            }

            if (sectionId === "section-highlighting") {
                const val = getRadioValue("quiz-b");
                if (!val) {
                    fb.textContent = "Pilih satu kondisi yang menurutmu paling tepat.";
                    fb.classList.add("info");
                } else if (val === "ingin-dimensi") {
                    fb.textContent = "Ya! Highlighting cocok saat klien ingin efek dimensi dan uban menyatu.";
                    fb.classList.add("correct");
                } else {
                    fb.textContent = "Coba lagi. Highlighting lebih ditujukan untuk efek garis dan dimensi pada rambut.";
                    fb.classList.add("wrong");
                }
            }

            if (sectionId === "section-lowlights") {
                fb.textContent = "Catatanmu tersimpan. Bandingkan lagi dengan materi untuk memperkuat pemahaman.";
                fb.classList.add("info");
            }

            if (sectionId === "section-balayage") {
                fb.textContent = "Catatan tentang alasan balayage terasa alami sudah tersimpan.";
                fb.classList.add("info");
            }

            if (sectionId === "section-root-touchup") {
                const val = getRadioValue("quiz-e");
                if (!val) {
                    fb.textContent = "Pilih skenario yang menurutmu paling cocok untuk root touch-up.";
                    fb.classList.add("info");
                } else if (val === "akar-uban") {
                    fb.textContent = "Tepat! Root touch-up ideal untuk uban yang muncul di akar saja.";
                    fb.classList.add("correct");
                } else {
                    fb.textContent = "Kurang pas. Root touch-up fokus pada bagian akar yang tumbuh baru.";
                    fb.classList.add("wrong");
                }
            }

            if (sectionId === "section-gray-blending") {
                fb.textContent = "Catatan tentang karakter klien untuk gray blending berhasil disimpan.";
                fb.classList.add("info");
            }
        }

        // SIMULASI 1: PILIH TEKNIK
        function runSimulation() {
            const uban = document.getElementById("sim-uban").value;
            const gaya = document.getElementById("sim-gaya").value;
            const perawatan = document.getElementById("sim-perawatan").value;

            const section = document.getElementById("section-simulator");
            const data = collectSectionData(section);
            localStorage.setItem(STORAGE_PREFIX + "section-simulator", JSON.stringify(data));

            const resultDiv = document.getElementById("sim-result");

            if (!uban || !gaya || !perawatan) {
                resultDiv.innerHTML = "Lengkapi semua pilihan dulu, ya. Simulasi akan lebih akurat.";
                return;
            }

            let rekomendasi = "";
            let alasan = "";

            if (uban === "banyak" && gaya === "solid") {
                rekomendasi = "Full Coverage + Root Touch-Up Berkala";
                alasan = "Uban yang banyak dan keinginan warna solid cocok dengan pewarnaan penuh. Root touch-up diperlukan saat akar tumbuh.";
            } else if (uban !== "banyak" && gaya === "dimensi") {
                rekomendasi = "Highlighting atau Kombinasi Highlight & Lowlights";
                alasan = "Uban yang tidak terlalu dominan dapat tersamarkan dengan garis-garis terang dan gelap.";
            } else if (gaya === "alami" && perawatan === "jarang") {
                rekomendasi = "Balayage atau Gray Blending";
                alasan = "Keduanya memberi transisi lembut dan tidak menuntut perawatan akar yang terlalu sering.";
            } else if (uban === "sedang" && gaya === "solid") {
                rekomendasi = "Full Coverage Dengan Nuansa Alami";
                alasan = "Mewarnai seluruh rambut dengan warna yang dekat dengan warna asli agar tetap terlihat natural.";
            } else if (uban === "sedikit" && gaya === "alami") {
                rekomendasi = "Gray Blending Ringan";
                alasan = "Uban yang sedikit dapat dibiarkan menyatu dengan sedikit campuran warna natural.";
            } else {
                rekomendasi = "Kombinasi Teknik (Konsultasi Lanjutan)";
                alasan = "Kondisi klien cukup unik, sehingga perlu kombinasi teknik dan analisis langsung di salon.";
            }

            resultDiv.innerHTML =
                "<strong>Rekomendasi Teknik:</strong> " + rekomendasi +
                "<br><strong>Alasan:</strong> " + alasan;
        }

        function updateSimResultFromStored(data) {
            if (!data) return;
            const resultDiv = document.getElementById("sim-result");
            resultDiv.innerHTML =
                "Pilihan simulasi sebelumnya sudah dimuat. Jika ingin melihat ulang rekomendasi, klik <strong>‚ÄúSimulasikan &amp; Simpan‚Äù</strong> lagi.";
        }

        // ====== SIMULASI 2: VISUAL PEWARNAAN ======
        function setRowStates(rowElement, states) {
            if (!rowElement) return;
            const strands = rowElement.querySelectorAll(".strand");
            strands.forEach((strand, idx) => {
                const state = states[idx] || "alami";
                strand.className = "strand " + state;
            });
        }

        function getBeforeStates(level) {
            const total = 12;
            let ubanCount = 0;
            if (level === "sedikit") ubanCount = 3;
            else if (level === "sedang") ubanCount = 6;
            else if (level === "banyak") ubanCount = 9;
            else ubanCount = 6;

            const arr = [];
            for (let i = 0; i < total; i++) {
                arr.push(i < ubanCount ? "uban" : "alami");
            }
            return arr;
        }

        function getAfterStates(beforeStates, technique) {
            const total = beforeStates.length;
            let afterStates = beforeStates.slice();

            switch (technique) {
                case "full":
                    // Full coverage: semua helai diwarnai
                    afterStates = Array(total).fill("colored");
                    break;

                case "highlight":
                    // Highlight: sebagian uban diganti helai terang
                    for (let i = 0; i < total; i++) {
                        if (beforeStates[i] === "uban" && i % 2 === 0) {
                            afterStates[i] = "colored";
                        } else {
                            afterStates[i] = beforeStates[i] === "uban" ? "uban" : "alami";
                        }
                    }
                    break;

                case "lowlights":
                    // Lowlights: tambahkan helai gelap di rambut alami, sebagian uban tetap
                    for (let i = 0; i < total; i++) {
                        if (beforeStates[i] === "alami" && i % 2 === 1) {
                            afterStates[i] = "dark";
                        } else {
                            afterStates[i] = beforeStates[i];
                        }
                    }
                    break;

                case "balayage":
                    // Balayage: akar lebih gelap/natural, ujung lebih terang
                    afterStates = beforeStates.slice();
                    for (let i = 0; i < total; i++) {
                        if (i < 4) {
                            afterStates[i] = beforeStates[i] === "uban" ? "uban" : "dark";
                        } else if (i >= 4 && i < 8) {
                            afterStates[i] = beforeStates[i] === "uban" ? "colored" : "alami";
                        } else {
                            afterStates[i] = "colored";
                        }
                    }
                    break;

                case "root":
                    // Root touch-up: helai pertama (akar) yang uban diganti warna
                    afterStates = beforeStates.slice();
                    for (let i = 0; i < 4; i++) {
                        if (beforeStates[i] === "uban") {
                            afterStates[i] = "colored";
                        }
                    }
                    break;

                case "gray":
                    // Gray blending: sebagian uban tetap, sebagian dicampur dengan warna alami/halus
                    afterStates = beforeStates.slice();
                    for (let i = 0; i < total; i++) {
                        if (beforeStates[i] === "uban" && i % 3 === 0) {
                            afterStates[i] = "colored";
                        } else if (beforeStates[i] === "uban" && i % 3 === 1) {
                            afterStates[i] = "alami";
                        } // sisanya dibiarkan uban
                    }
                    break;
            }

            return afterStates;
        }

        function initHairSimulationDefault() {
            const beforeRow = document.getElementById("hair-before");
            const afterRow = document.getElementById("hair-after");
            if (!beforeRow || !afterRow) return;

            const defaultStates = getBeforeStates("sedang");
            setRowStates(beforeRow, defaultStates);
            setRowStates(afterRow, defaultStates);
        }

        function runColorSimulation(shouldSave = true) {
            const level = document.getElementById("sim2-uban").value;
            const teknik = document.getElementById("sim2-teknik").value;
            const resultDiv = document.getElementById("sim2-result");

            if (shouldSave) {
                const section = document.getElementById("section-color-sim");
                const data = collectSectionData(section);
                localStorage.setItem(STORAGE_PREFIX + "section-color-sim", JSON.stringify(data));
            }

            if (!level || !teknik) {
                resultDiv.innerHTML = "Lengkapi pilihan jumlah uban dan teknik pewarnaan terlebih dahulu.";
                initHairSimulationDefault();
                return;
            }

            const beforeStates = getBeforeStates(level);
            const afterStates = getAfterStates(beforeStates, teknik);

            const beforeRow = document.getElementById("hair-before");
            const afterRow = document.getElementById("hair-after");
            setRowStates(beforeRow, beforeStates);
            setRowStates(afterRow, afterStates);

            let namaTeknik = "";
            let keterangan = "";

            switch (teknik) {
                case "full":
                    namaTeknik = "Full Coverage";
                    keterangan = "Semua helai uban tertutup warna baru. Teknik ini sesuai dengan materi bagian a.";
                    break;
                case "highlight":
                    namaTeknik = "Highlighting";
                    keterangan = "Sebagian helai uban diganti garis terang, sehingga uban menyatu dengan dimensi warna (materi b).";
                    break;
                case "lowlights":
                    namaTeknik = "Lowlights";
                    keterangan = "Helai gelap ditambahkan untuk memberi kedalaman, membantu menyamarkan uban dan highlight (materi c).";
                    break;
                case "balayage":
                    namaTeknik = "Balayage";
                    keterangan = "Transisi dari akar yang lebih gelap ke ujung yang lebih terang, memberikan gradasi lembut (materi d).";
                    break;
                case "root":
                    namaTeknik = "Root Touch-Up";
                    keterangan = "Bagian akar yang beruban diberi warna baru, sementara panjang rambut hampir tidak berubah (materi e).";
                    break;
                case "gray":
                    namaTeknik = "Gray Blending";
                    keterangan = "Sebagian uban dibiarkan, sebagian dicampur dengan warna alami sehingga transisi terlihat halus (materi f).";
                    break;
            }

            let teksLevel = "";
            if (level === "sedikit") teksLevel = "uban sedikit";
            else if (level === "sedang") teksLevel = "uban sedang";
            else if (level === "banyak") teksLevel = "uban banyak";

            resultDiv.innerHTML =
                "<strong>Teknik:</strong> " + namaTeknik +
                " | <strong>Kondisi awal:</strong> " + teksLevel +
                "<br><strong>Penjelasan simulasi:</strong> " + keterangan;
        }

        function applyColorSimulationFromStored(data) {
            if (!data) return;
            const level = data["sim2-uban"];
            const teknik = data["sim2-teknik"];

            if (level && teknik) {
                runColorSimulation(false);
                const resultDiv = document.getElementById("sim2-result");
                resultDiv.innerHTML += "<br><em>Simulasi terakhir telah dimuat dari penyimpanan.</em>";
            } else {
                initHairSimulationDefault();
            }
        }

        // Inisialisasi: muat semua section dari localStorage
        document.addEventListener("DOMContentLoaded", () => {
            const sectionIds = [
                "section-full-coverage",
                "section-highlighting",
                "section-lowlights",
                "section-balayage",
                "section-root-touchup",
                "section-gray-blending",
                "section-simulator",
                "section-color-sim"
            ];

            sectionIds.forEach(restoreSection);

            // Jika tidak ada data tersimpan untuk simulasi visual, set default
            if (!localStorage.getItem(STORAGE_PREFIX + "section-color-sim")) {
                initHairSimulationDefault();
            }
        });
    </script>
</body>

</html>