<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apersepsi • Single Application</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --navbar-h: 55px;
            --footer-h: 40px;
            --brand: #ff3f8e;
            --sidebar-w: 255px;
            --sidebar-gap: 8px;
            --line: #e5e7eb;
            --soft-gray: #f3f4f6;

        }

        html,
        body {
            height: 100%;
        }

        body {
            padding-bottom: var(--footer-h);
            background: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        main.app-shell {
            min-height: calc(100vh - var(--navbar-h) - var(--footer-h));
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid #eee;
        }

        .menu-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .04);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
            font-size: .95rem;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        .no-top-gap>aside,
        .no-top-gap>section {
            padding-top: 0 !important;
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
        }

        .btn-brand:hover {
            color: #fff;
            filter: brightness(.95);
        }

        .materi-card .card-header {
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: .5rem 1rem;
        }

        .page-nav {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .page-nav-inner {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: .5rem;
            flex-wrap: wrap;
        }

        /* Mobile: sidebar ikut alur */
        @media (max-width: 767.98px) {
            .sidebar-fixed {
                position: static;
                width: 100%;
            }
        }

        /* Desktop: sidebar fixed kiri, konten bergeser & card dipendekkan */
        @media (min-width: 768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }

            .materi-card {
                display: flex;
                flex-direction: column;
                max-height: calc(100dvh - var(--navbar-h) - var(--footer-h) - 90px);
            }

            .materi-card .card-body {
                flex: 1 1 auto;
                min-height: 0;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }
        }

        .flashcard {
            border: 1px solid var(--line);
            border-radius: 8px;
            padding: .75rem;
            cursor: pointer;
            background: #fff;
            transition: background .15s, box-shadow .15s;
        }

        .flashcard.active {
            background: rgba(255, 63, 142, 0.04);
            box-shadow: 0 0 0 1px rgba(255, 63, 142, 0.25);
        }

        .box {
            fill: #fff;
            stroke: #e5e7eb;
            stroke-width: 2;
            rx: 16;
        }

        .line {
            stroke: var(--brand);
            stroke-width: 3;
        }

        .text {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            font-size: 18px;
        }

        .card-toning {
            border-left: 4px solid var(--brand);
            background: #fff;
        }

        .badge-label {
            font-size: .7rem;
            text-transform: uppercase;
            letter-spacing: .1em;
        }

        .btn-outline-brand {
            color: var(--brand);
            border-color: var(--brand);
        }

        .btn-outline-brand:hover {
            background: var(--brand);
            color: #fff;
        }

        .btn-row {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
            margin-top: .5rem;
            justify-content: flex-end;
        }

        .draggable {
            cursor: grab;
        }

        .dropzone {
            min-height: 70px;
            border-radius: .75rem;
            border: 2px dashed #d1d5db;
            padding: .5rem;
            background: #fff;
            transition: background .15s, border-color .15s;
        }

        .dropzone.bg-active {
            background: #ffe6f3;
            border-color: var(--brand);
        }

        .dropzone.correct {
            border-color: #198754;
            background: #e8fff1;
        }

        .dropzone.wrong {
            border-color: #dc3545;
            background: #fff1f2;
        }

        .info-chip {
            font-size: .8rem;
            background: var(--soft-gray);
            border-radius: 999px;
            padding: .15rem .7rem;
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem; color:var(--brand)"></i>
                <strong>Pewarnaan Rambut</strong> <span class="fw-normal">• Single Application</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            aria-current="page" href="videopengantar.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../evaluasi.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                    <li class="nav-item"><a class="nav-link" href="../peta.html">Peta Konsep</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- MAIN: sidebar + konten -->
    <main class="main-pad app-shell">
        <div class="container-fluid">
            <div class="row g-1 no-top-gap">
                <!-- SIDEBAR -->
                <aside class="col-12 col-md-auto order-1 order-md-0 p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm">
                        <div class="menu-title"><i class="bi bi-journal-bookmark"></i> Single Application</div>
                        <a class="menu-item" aria-current="page" href="videopengantar.html">
                            <i class="bi bi-lightbulb">Video Pengantar</i>
                        </a>
                        <a class="menu-item" aria-current="page" href="SingleApplication.html">
                            <i class="bi bi-lightbulb"></i> Overview Single Application
                        </a>

                        <!-- A. Pewarnaan Rambut Single -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-A" aria-expanded="true"
                            aria-controls="submenu-A">
                            <span class="me-2"><i class="bi bi-droplet-half"></i></span>
                            <span class="flex-grow-1 text-start">A. Pewarnaan Rambut Single</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-A">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanSingleApplication.html">1. Pewarnaan Single
                                        Application</a></li>
                                <li><a class="menu-item py-1" href="CaraMemilihWarna.html">2. Cara Memilih Warna</a>
                                </li>
                                <li><a class="menu-item py-1" href="MemilihWarnaCat.html">3. Memilih Warna Cat</a></li>
                                <li><a class="menu-item py-1" href="KontraindikasiPewarnaan.html">4. Kontraindikasi
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="HalYangDiperhatikan.html">5. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanA.html">6. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- B. Toning -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-B" aria-expanded="true"
                            aria-controls="submenu-B">
                            <span class="me-2"><i class="bi bi-palette"></i></span>
                            <span class="flex-grow-1 text-start">B. Toning</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-B">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1 active" href="HairToning.html">1. Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="CiriHairToning.html">2. Ciri Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="KeunggulanHairToning.html">3. Keunggulan Hair
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="KosmetikHairToning.html">4. Kosmetik Hair Toning</a>
                                </li>
                                <li><a class="menu-item py-1" href="ProsedurToning.html">5. Prosedur Melakukan
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="HalDiperhatikanToning.html">6. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanB.html">7. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- C. Pewarnaan Uban -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-C" aria-expanded="true"
                            aria-controls="submenu-C">
                            <span class="me-2"><i class="bi bi-person-lines-fill"></i></span>
                            <span class="flex-grow-1 text-start">C. Pewarnaan Uban</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-C">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanUban.html">1. Pewarnaan Uban</a></li>
                                <li><a class="menu-item py-1" href="JenisPewarnaanUban.html">2. Jenis Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="TeknikPewarnaanUban.html">3. Teknik Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="UjiTempel.html">4. Uji Tempel</a></li>
                                <li><a class="menu-item py-1" href="ProsedurKerjaUban.html">5. Prosedur Kerja</a></li>
                                <li><a class="menu-item py-1" href="ReaksiAlergiUban.html">6. Reaksi Alergi</a></li>
                                <li><a class="menu-item py-1" href="KesalahanPewarnaanUban.html">7. Kesalahan
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanC.html">8. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- Evaluasi -->
                        <a class="menu-item" href="../evaluasi.html">
                            <i class="bi bi-clipboard-check"></i> Evaluasi
                        </a>
                        <a class="menu-item" href="VideoPentup.html">
                            <i class="bi bi-camera-video"></i> Evaluasi
                        </a>
                    </nav>
                </aside>

                <!-- KONTEN KANAN -->
                <section class="col-12 col-md-9 col-xl-10 content-with-fixed order-2 order-md-0">
                    <div class="card shadow-sm materi-card">
                        <div class="card-header d-flex align-items-center gap-2">
                            <i class="bi bi-lightbulb" style="color:var(--brand); font-size:1.25rem;"></i>
                            <h3 class="h5 mb-0 fw-bold">Konsep Hair Toning
                        </div>

                        <div class="card-body" id="apersepsi-hair-coloring">
                            <!-- MATERI -->
                            <section id="materi" class="mb-4">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <span class="badge-label text-secondary">Materi</span>
                                        <h2 class="h5 mt-1 mb-3">Konsep Hair Toning</h2>
                                        <p>
                                            Melakukan <strong>hair toning</strong> akan mengembalikan warna alami rambut
                                            serta memperbaiki warna rambut
                                            yang tidak merata. Hair toning juga memperkuat rambut dengan menciptakan
                                            pelindung di sekitar helai dan
                                            menyeimbangkan porositas rambut dengan mengisi batang rambut.
                                        </p>
                                        <p>
                                            Toning rambut adalah proses pewarnaan menggunakan <strong>toner khusus tanpa
                                                amonia</strong>.
                                            Warna yang dihasilkan cenderung <strong>lembut dan natural</strong>. Teknik
                                            ini direkomendasikan oleh para
                                            ahli rambut karena <strong>aman dan tidak merusak rambut</strong>. Hair
                                            toning biasanya bertahan selama
                                            sekitar <strong>4–6 minggu</strong>, tergantung seberapa sering rambut
                                            dicuci. Toning sesuai untuk rambut
                                            yang sudah pernah diwarnai atau untuk meratakan warna pada <em>virgin
                                                hair</em>.
                                        </p>
                                        <p>
                                            Toning rambut termasuk pewarnaan <strong>semipermanen</strong> yang membantu
                                            mengembalikan warna rambut
                                            seperti yang diinginkan, tetapi <strong>tidak dapat membuat warna rambut
                                                lebih cerah dari warna asli</strong>.
                                            Yang tampak adalah <strong>pantulan</strong> dari warna yang diaplikasikan.
                                            Toning juga menyegarkan dan
                                            menambah dimensi, memperbaiki warna yang tidak merata, membuat rambut tampak
                                            berkilau, serta membantu
                                            menguatkan rambut dan menambah volume dengan membuat kutikula rambut tampak
                                            penuh.
                                        </p>

                                        <div class="mt-3">
                                            <span class="info-chip me-1 mb-1">tanpa amonia</span>
                                            <span class="info-chip me-1 mb-1">warna lembut &amp; natural</span>
                                            <span class="info-chip me-1 mb-1">semipermanen (4–6 minggu)</span>
                                            <span class="info-chip me-1 mb-1">tidak mencerahkan dari warna asli</span>
                                            <span class="info-chip me-1 mb-1">menyegarkan &amp; menambah dimensi</span>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- LATIHAN 1: PILIHAN GANDA DEFINISI -->
                            <section id="latihan1" class="mb-4">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <span class="badge-label text-secondary">Latihan 1</span>
                                        <h2 class="h6 mt-1 mb-2">Memahami Definisi Hair Toning</h2>
                                        <p class="small text-secondary">
                                            Pilih pernyataan yang <strong>paling tepat</strong> menggambarkan konsep
                                            hair toning.
                                        </p>

                                        <div id="l1" data-correct="1" class="mb-2">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="l1" id="l1a"
                                                    value="0">
                                                <label class="form-check-label" for="l1a">
                                                    Teknik pewarnaan permanen dengan amonia tinggi untuk mencerahkan
                                                    rambut beberapa tingkat.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="l1" id="l1b"
                                                    value="1">
                                                <label class="form-check-label" for="l1b">
                                                    Proses pewarnaan menggunakan toner tanpa amonia yang memberi warna
                                                    lembut, natural, dan membantu
                                                    menyeimbangkan kondisi rambut.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="l1" id="l1c"
                                                    value="2">
                                                <label class="form-check-label" for="l1c">
                                                    Teknik memotong rambut berlapis untuk menambah volume dan tekstur.
                                                </label>
                                            </div>
                                        </div>

                                        <div id="feed1" class="small mb-1"></div>

                                        <div class="btn-row">
                                            <button class="btn btn-outline-brand btn-sm" onclick="cekLatihan1()">Cek
                                                Jawaban</button>
                                            <button class="btn btn-outline-brand btn-sm"
                                                onclick="simpanLatihan1()">Simpan</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                onclick="resetLatihan1()">Reset</button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- LATIHAN 2: CEKLIS MANFAAT / BUKAN -->
                            <section id="latihan2" class="mb-4">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <span class="badge-label text-secondary">Latihan 2</span>
                                        <h2 class="h6 mt-1 mb-2">Manfaat Hair Toning</h2>
                                        <p class="small text-secondary">Centang semua pernyataan yang merupakan
                                            <strong>manfaat hair toning</strong>.
                                        </p>

                                        <div id="l2" class="mb-2">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="l2a">
                                                <label class="form-check-label" for="l2a">
                                                    Membantu meratakan warna rambut yang tidak merata dan menyegarkan
                                                    warna yang pudar.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="l2b">
                                                <label class="form-check-label" for="l2b">
                                                    Membuat warna rambut jauh lebih terang dari warna asli tanpa proses
                                                    lain.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="l2c">
                                                <label class="form-check-label" for="l2c">
                                                    Menambah kilau, dimensi, dan membantu memperkuat batang rambut.
                                                </label>
                                            </div>
                                        </div>

                                        <div id="feed2" class="small mb-1"></div>

                                        <div class="btn-row">
                                            <button class="btn btn-outline-brand btn-sm" onclick="cekLatihan2()">Cek
                                                Jawaban</button>
                                            <button class="btn btn-outline-brand btn-sm"
                                                onclick="simpanLatihan2()">Simpan</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                onclick="resetLatihan2()">Reset</button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- LATIHAN 3: DRAG & DROP CIRI / BUKAN -->
                            <section id="latihan3" class="mb-4">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <span class="badge-label text-secondary">Latihan 3</span>
                                        <h2 class="h6 mt-1 mb-2">Ciri-ciri Hair Toning</h2>
                                        <p class="small text-secondary mb-2">
                                            Seret pernyataan berikut ke kolom yang sesuai: <strong>"Ciri Hair
                                                Toning"</strong> atau
                                            <strong>"Bukan Ciri Hair Toning"</strong>.
                                        </p>

                                        <div id="chipPool" class="d-flex flex-wrap gap-2 mb-3">
                                            <span id="c1" class="badge text-bg-light border draggable" draggable="true"
                                                data-type="ciri">
                                                Tanpa amonia dan bersifat semipermanen.
                                            </span>
                                            <span id="c2" class="badge text-bg-light border draggable" draggable="true"
                                                data-type="bukan">
                                                Selalu bertahan lebih dari satu tahun tanpa pudar.
                                            </span>
                                            <span id="c3" class="badge text-bg-light border draggable" draggable="true"
                                                data-type="ciri">
                                                Memberi warna lembut dan natural pada rambut.
                                            </span>
                                            <span id="c4" class="badge text-bg-light border draggable" draggable="true"
                                                data-type="bukan">
                                                Digunakan untuk bleaching hingga level pirang sangat terang.
                                            </span>
                                            <span id="c5" class="badge text-bg-light border draggable" draggable="true"
                                                data-type="ciri">
                                                Menambah kilau dan dimensi tanpa merusak rambut.
                                            </span>
                                        </div>

                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <h6 class="small text-secondary mb-1">Ciri Hair Toning</h6>
                                                <div id="zoneCiri" class="dropzone" data-accept="ciri">
                                                    <small class="text-secondary">Letakkan ciri-ciri hair toning di
                                                        sini.</small>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <h6 class="small text-secondary mb-1">Bukan Ciri Hair Toning</h6>
                                                <div id="zoneBukan" class="dropzone" data-accept="bukan">
                                                    <small class="text-secondary">Letakkan pernyataan yang bukan ciri di
                                                        sini.</small>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="feed3" class="small mt-2 mb-1"></div>

                                        <div class="btn-row">
                                            <button class="btn btn-outline-brand btn-sm" onclick="cekLatihan3()">Cek
                                                Jawaban</button>
                                            <button class="btn btn-outline-brand btn-sm"
                                                onclick="simpanLatihan3()">Simpan</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                onclick="resetLatihan3()">Reset</button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- LATIHAN 4: REFLEKSI -->
                            <section id="latihan4" class="mb-5">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <span class="badge-label text-secondary">Latihan 4</span>
                                        <h2 class="h6 mt-1 mb-2">Refleksi Konsep</h2>
                                        <p class="small text-secondary">
                                            Jelaskan dengan bahasamu sendiri: <br>
                                            <strong>“Kapan hair toning lebih tepat digunakan daripada pewarnaan
                                                permanen?”</strong>
                                        </p>
                                        <textarea id="refleksi" rows="3" class="form-control mb-2"
                                            placeholder="Tuliskan minimal 1–2 kalimat di sini..."></textarea>
                                        <div id="feed4" class="small mb-1 text-secondary"></div>

                                        <div class="btn-row">
                                            <button class="btn btn-outline-brand btn-sm"
                                                onclick="simpanRefleksi()">Simpan Refleksi</button>
                                            <button class="btn btn-outline-secondary btn-sm"
                                                onclick="resetRefleksi()">Reset</button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                        </div>
                    </div>

                    <!-- TOMBOL NAVIGASI DI BAWAH KONTEN -->
                    <div class="page-nav">
                        <div class="page-nav-inner">
                            <a class="btn btn-outline-secondary" href="AyoLakukanA.html">
                                <i class="bi bi-arrow-left"></i> Sebelumnya
                            </a>
                            <a class="btn btn-brand" href="CiriHairToning.html">
                                Berikutnya <i class="bi bi-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small">
            <span>SMKS ISFI BANJARMASIN • Hair Coloring</span>
            <span class="text-muted">© 2025 • Single Application</span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const LS_KEY = 'konsep_hair_toning_interaktif_v1';

        // ====== SIMPAN & MUAT STATE ======
        function saveState() {
            if (typeof Storage === 'undefined') return;

            const state = {
                // latihan 1
                l1: document.querySelector('input[name="l1"]:checked')?.value || '',
                feed1: document.getElementById('feed1').innerHTML,

                // latihan 2
                l2: {
                    a: document.getElementById('l2a').checked,
                    b: document.getElementById('l2b').checked,
                    c: document.getElementById('l2c').checked
                },
                feed2: document.getElementById('feed2').innerHTML,

                // latihan 3: posisi chip & feedback
                chipParents: {},
                feed3: document.getElementById('feed3').innerHTML,

                // refleksi
                refleksi: document.getElementById('refleksi').value,
                feed4: document.getElementById('feed4').innerHTML
            };

            ['c1', 'c2', 'c3', 'c4', 'c5'].forEach(id => {
                const el = document.getElementById(id);
                if (el && el.parentElement) {
                    state.chipParents[id] = el.parentElement.id || 'chipPool';
                }
            });

            localStorage.setItem(LS_KEY, JSON.stringify(state));
        }

        function loadState() {
            if (typeof Storage === 'undefined') return;
            const raw = localStorage.getItem(LS_KEY);
            if (!raw) return;

            let state;
            try { state = JSON.parse(raw); } catch (e) { console.error(e); return; }

            // l1
            if (state.l1 !== undefined && state.l1 !== '') {
                const r = document.querySelector('input[name="l1"][value="' + state.l1 + '"]');
                if (r) r.checked = true;
            }
            if (state.feed1) document.getElementById('feed1').innerHTML = state.feed1;

            // l2
            if (state.l2) {
                document.getElementById('l2a').checked = !!state.l2.a;
                document.getElementById('l2b').checked = !!state.l2.b;
                document.getElementById('l2c').checked = !!state.l2.c;
            }
            if (state.feed2) document.getElementById('feed2').innerHTML = state.feed2;

            // l3 chip positions
            if (state.chipParents) {
                Object.keys(state.chipParents).forEach(id => {
                    const parentId = state.chipParents[id];
                    const parent = document.getElementById(parentId) || document.getElementById('chipPool');
                    const chip = document.getElementById(id);
                    if (chip && parent) parent.appendChild(chip);
                });
            }
            if (state.feed3) document.getElementById('feed3').innerHTML = state.feed3;

            // refleksi
            if (state.refleksi) {
                document.getElementById('refleksi').value = state.refleksi;
            }
            if (state.feed4) document.getElementById('feed4').innerHTML = state.feed4;
            else if (state.refleksi) {
                document.getElementById('feed4').textContent =
                    'Refleksi terakhir telah dimuat dari perangkat ini. Kamu bisa mengeditnya kembali.';
            }
        }

        // ====== LATIHAN 1 ======
        function cekLatihan1() {
            const selected = document.querySelector('input[name="l1"]:checked');
            const box = document.getElementById('feed1');
            if (!selected) {
                box.textContent = 'Pilih salah satu jawaban terlebih dahulu.';
                saveState();
                return;
            }
            if (selected.value === '1') {
                box.innerHTML = '<span class="text-success">✅ Tepat! Hair toning menggunakan toner tanpa amonia dengan hasil warna lembut dan natural.</span>';
            } else {
                box.innerHTML = '<span class="text-danger">❌ Belum tepat. Baca lagi bahwa hair toning memakai toner khusus tanpa amonia dan tidak bersifat permanen.</span>';
            }
            saveState();
        }

        function simpanLatihan1() {
            saveState();
            const box = document.getElementById('feed1');
            if (!box.textContent) {
                box.textContent = 'Jawaban tersimpan di perangkat ini.';
            } else {
                box.innerHTML += ' <span class="text-secondary">[Tersimpan]</span>';
            }
        }

        function resetLatihan1() {
            document.querySelectorAll('input[name="l1"]').forEach(r => r.checked = false);
            document.getElementById('feed1').innerHTML = '';
            saveState();
        }

        // ====== LATIHAN 2 ======
        function cekLatihan2() {
            const a = document.getElementById('l2a').checked;
            const b = document.getElementById('l2b').checked;
            const c = document.getElementById('l2c').checked;
            const box = document.getElementById('feed2');

            if (!a && !b && !c) {
                box.textContent = 'Centang dulu pernyataan yang menurutmu benar.';
                saveState();
                return;
            }

            if (a && !b && c) {
                box.innerHTML = '<span class="text-success">✅ Benar. Hair toning meratakan warna, menyegarkan, menambah kilau dan dimensi, tetapi tidak mencerahkan jauh dari warna asli.</span>';
            } else {
                box.innerHTML = '<span class="text-warning">⚠️ Masih ada yang kurang tepat. Ingat: hair toning <strong>tidak</strong> membuat rambut jauh lebih terang dari warna asli.</span>';
            }
            saveState();
        }

        function simpanLatihan2() {
            saveState();
            const box = document.getElementById('feed2');
            if (!box.textContent) {
                box.textContent = 'Jawaban tersimpan di perangkat ini.';
            } else {
                box.innerHTML += ' <span class="text-secondary">[Tersimpan]</span>';
            }
        }

        function resetLatihan2() {
            ['l2a', 'l2b', 'l2c'].forEach(id => document.getElementById(id).checked = false);
            document.getElementById('feed2').innerHTML = '';
            saveState();
        }

        // ====== LATIHAN 3 (DRAG & DROP) ======
        function setupDrag() {
            document.querySelectorAll('.draggable').forEach(chip => {
                chip.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('chipId', chip.id);
                });
            });

            ['chipPool', 'zoneCiri', 'zoneBukan'].forEach(zoneId => {
                const zone = document.getElementById(zoneId);
                if (!zone) return;
                zone.addEventListener('dragover', e => {
                    e.preventDefault();
                    zone.classList.add('bg-active');
                });
                zone.addEventListener('dragleave', () => zone.classList.remove('bg-active'));
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    zone.classList.remove('bg-active');
                    const id = e.dataTransfer.getData('chipId');
                    const chip = document.getElementById(id);
                    if (chip) {
                        const small = zone.querySelector('small');
                        if (small) small.remove();
                        zone.appendChild(chip);
                        saveState();
                    }
                });
            });
        }

        function cekLatihan3() {
            const zoneCiri = document.getElementById('zoneCiri');
            const zoneBukan = document.getElementById('zoneBukan');
            const box = document.getElementById('feed3');

            zoneCiri.classList.remove('correct', 'wrong');
            zoneBukan.classList.remove('correct', 'wrong');

            let benar = true;

            zoneCiri.querySelectorAll('.draggable').forEach(chip => {
                if (chip.dataset.type !== 'ciri') benar = false;
            });
            zoneBukan.querySelectorAll('.draggable').forEach(chip => {
                if (chip.dataset.type !== 'bukan') benar = false;
            });

            if (zoneCiri.querySelectorAll('.draggable').length === 0 &&
                zoneBukan.querySelectorAll('.draggable').length === 0) {
                box.textContent = 'Seret dulu setiap pernyataan ke salah satu kolom.';
                saveState();
                return;
            }

            if (benar) {
                zoneCiri.classList.add('correct');
                zoneBukan.classList.add('correct');
                box.innerHTML = '<span class="text-success">✅ Bagus! Kamu bisa membedakan ciri hair toning dan yang bukan.</span>';
            } else {
                zoneCiri.classList.add('wrong');
                zoneBukan.classList.add('wrong');
                box.innerHTML = '<span class="text-danger">❌ Masih ada chip yang belum di tempat yang tepat. Ingat: hair toning bukan bleaching permanen jangka panjang.</span>';
            }
            saveState();
        }

        function simpanLatihan3() {
            saveState();
            const box = document.getElementById('feed3');
            if (!box.textContent) {
                box.textContent = 'Pengelompokan tersimpan di perangkat ini.';
            } else {
                box.innerHTML += ' <span class="text-secondary">[Tersimpan]</span>';
            }
        }

        function resetLatihan3() {
            const pool = document.getElementById('chipPool');
            ['c1', 'c2', 'c3', 'c4', 'c5'].forEach(id => {
                const chip = document.getElementById(id);
                if (chip && pool) pool.appendChild(chip);
            });
            document.getElementById('zoneCiri').classList.remove('correct', 'wrong');
            document.getElementById('zoneBukan').classList.remove('correct', 'wrong');
            document.getElementById('feed3').innerHTML = '';
            saveState();
        }

        // ====== REFLEKSI ======
        function simpanRefleksi() {
            const txt = document.getElementById('refleksi').value.trim();
            const box = document.getElementById('feed4');
            if (!txt) {
                box.textContent = 'Isi dulu jawaban refleksimu, minimal 1 kalimat.';
                saveState();
                return;
            }
            box.textContent = 'Refleksimu tersimpan di perangkat ini. Kamu bisa kembali dan mengedit kapan saja.';
            saveState();
        }

        function resetRefleksi() {
            document.getElementById('refleksi').value = '';
            document.getElementById('feed4').innerHTML = '';
            saveState();
        }

        // INIT
        window.addEventListener('DOMContentLoaded', () => {
            setupDrag();
            loadState();

            // auto-save perubahan sederhana
            ['refleksi', 'l2a', 'l2b', 'l2c'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('change', saveState);
            });
            document.querySelectorAll('input[name="l1"]').forEach(r => {
                r.addEventListener('change', saveState);
            });
        });
    </script>
</body>

</html>