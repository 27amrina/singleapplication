<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apersepsi • Single Application</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --navbar-h: 55px;
            --footer-h: 40px;
            --brand: #ff3f8e;
            --sidebar-w: 255px;
            --sidebar-gap: 8px;
            --line: #e5e7eb;
            --pink: #ff3f8e;
            --abu: #e5e7eb;
            --abu-tua: #6b7280;
            --bg: #f9fafb;
        }

        html,
        body {
            height: 100%;
        }

        body {
            padding-bottom: var(--footer-h);
            background: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        main.app-shell {
            min-height: calc(100vh - var(--navbar-h) - var(--footer-h));
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid #eee;
        }

        .menu-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .04);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
            font-size: .95rem;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        .no-top-gap>aside,
        .no-top-gap>section {
            padding-top: 0 !important;
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
        }

        .btn-brand:hover {
            color: #fff;
            filter: brightness(.95);
        }

        .materi-card .card-header {
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: .5rem 1rem;
        }

        .page-nav {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .page-nav-inner {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: .5rem;
            flex-wrap: wrap;
        }

        /* Mobile: sidebar ikut alur */
        @media (max-width: 767.98px) {
            .sidebar-fixed {
                position: static;
                width: 100%;
            }
        }

        /* Desktop: sidebar fixed kiri, konten bergeser & card dipendekkan */
        @media (min-width: 768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }

            .materi-card {
                display: flex;
                flex-direction: column;
                max-height: calc(100dvh - var(--navbar-h) - var(--footer-h) - 90px);
            }

            .materi-card .card-body {
                flex: 1 1 auto;
                min-height: 0;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }
        }

        .flashcard {
            border: 1px solid var(--line);
            border-radius: 8px;
            padding: .75rem;
            cursor: pointer;
            background: #fff;
            transition: background .15s, box-shadow .15s;
        }

        .flashcard.active {
            background: rgba(255, 63, 142, 0.04);
            box-shadow: 0 0 0 1px rgba(255, 63, 142, 0.25);
        }

        .box {
            fill: #fff;
            stroke: #e5e7eb;
            stroke-width: 2;
            rx: 16;
        }

        .line {
            stroke: var(--brand);
            stroke-width: 3;
        }

        .text {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            font-size: 18px;
        }

        .badge-kecil {
            font-size: .7rem;
            letter-spacing: .08em;
            text-transform: uppercase;
            color: var(--abu-tua);
        }

        .card-toning {
            border-radius: 1rem;
            border: 1px solid var(--abu);
            background: #fff;
        }

        .btn-outline-pink {
            color: var(--pink);
            border-color: var(--pink);
        }

        .btn-outline-pink:hover,
        .btn-outline-pink:focus {
            background: var(--pink);
            color: #fff;
        }

        .btn-reset {
            border-color: #9ca3af;
            color: #4b5563;
        }

        .btn-reset:hover {
            background: #9ca3af;
            color: #fff;
        }

        .step-chip {
            display: inline-block;
            padding: .35rem .75rem;
            border-radius: 999px;
            background: #fff;
            border: 1px solid var(--abu);
            cursor: grab;
            font-size: .85rem;
            margin: .15rem;
        }

        .drop-area {
            min-height: 80px;
            border-radius: .75rem;
            border: 2px dashed var(--abu);
            padding: .5rem;
            background: #fff;
        }

        .drop-area.active {
            border-color: var(--pink);
            background: #fff0f7;
        }

        .drop-area.correct {
            border-color: #16a34a;
            background: #ecfdf3;
        }

        .drop-area.wrong {
            border-color: #dc2626;
            background: #fef2f2;
        }

        .sim-preview {
            height: 120px;
            border-radius: 1rem;
            background: linear-gradient(90deg, #4b5563, #9ca3af);
            border: 1px solid rgba(0, 0, 0, .13);
            box-shadow: 0 8px 18px rgba(0, 0, 0, .2);
        }

        .time-pill {
            display: inline-block;
            padding: .15rem .55rem;
            border-radius: 999px;
            border: 1px solid var(--abu);
            font-size: .75rem;
            color: var(--abu-tua);
            background: #fff;
        }

        .toast-mini {
            font-size: .8rem;
            color: var(--pink);
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem; color:var(--brand)"></i>
                <strong>Pewarnaan Rambut</strong> <span class="fw-normal">• Single Application</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            aria-current="page" href="videopengantar.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../evaluasi.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                    <li class="nav-item"><a class="nav-link" href="../peta.html">Peta Konsep</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- MAIN: sidebar + konten -->
    <main class="main-pad app-shell">
        <div class="container-fluid">
            <div class="row g-1 no-top-gap">
                <!-- SIDEBAR -->
                <aside class="col-12 col-md-auto order-1 order-md-0 p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm">
                        <div class="menu-title"><i class="bi bi-journal-bookmark"></i> Single Application</div>
                        <a class="menu-item " aria-current="page" href="videopengantar.html">
                            <i class="bi bi-lightbulb">Video Pengantar</i>
                        </a>
                        <a class="menu-item" aria-current="page" href="SingleApplication.html">
                            <i class="bi bi-lightbulb"></i> Overview Single Application
                        </a>

                        <!-- A. Pewarnaan Rambut Single -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-A" aria-expanded="true"
                            aria-controls="submenu-A">
                            <span class="me-2"><i class="bi bi-droplet-half"></i></span>
                            <span class="flex-grow-1 text-start">A. Pewarnaan Rambut Single</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-A">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanSingleApplication.html">1. Pewarnaan Single
                                        Application</a></li>
                                <li><a class="menu-item py-1" href="CaraMemilihWarna.html">2. Cara Memilih Warna</a>
                                </li>
                                <li><a class="menu-item py-1" href="MemilihWarnaCat.html">3. Memilih Warna Cat</a></li>
                                <li><a class="menu-item py-1" href="KontraindikasiPewarnaan.html">4. Kontraindikasi
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="HalYangDiperhatikan.html">5. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanA.html">6. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- B. Toning -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-B" aria-expanded="true"
                            aria-controls="submenu-B">
                            <span class="me-2"><i class="bi bi-palette"></i></span>
                            <span class="flex-grow-1 text-start">B. Toning</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-B">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="HairToning.html">1. Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="CiriHairToning.html">2. Ciri Hair Toning</a></li>
                                <li><a class="menu-item py-1" href="KeunggulanHairToning.html">3. Keunggulan Hair
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="KosmetikHairToning.html">4. Kosmetik Hair Toning</a>
                                </li>
                                <li><a class="menu-item py-1 active" href="ProsedurToning.html">5. Prosedur Melakukan
                                        Toning</a></li>
                                <li><a class="menu-item py-1" href="HalDiperhatikanToning.html">6. Hal Diperhatikan</a>
                                </li>
                                <li><a class="menu-item py-1" href="AyoLakukanB.html">7. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- C. Pewarnaan Uban -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent menu-item" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-C" aria-expanded="true"
                            aria-controls="submenu-C">
                            <span class="me-2"><i class="bi bi-person-lines-fill"></i></span>
                            <span class="flex-grow-1 text-start">C. Pewarnaan Uban</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>
                        <div class="collapse show" id="submenu-C">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanUban.html">1. Pewarnaan Uban</a></li>
                                <li><a class="menu-item py-1" href="JenisPewarnaanUban.html">2. Jenis Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="TeknikPewarnaanUban.html">3. Teknik Pewarnaan</a>
                                </li>
                                <li><a class="menu-item py-1" href="UjiTempel.html">4. Uji Tempel</a></li>
                                <li><a class="menu-item py-1 " href="ProsedurKerjaUban.html">5. Prosedur Kerja</a>
                                </li>
                                <li><a class="menu-item py-1" href="ReaksiAlergiUban.html">6. Reaksi Alergi</a></li>
                                <li><a class="menu-item py-1" href="KesalahanPewarnaanUban.html">7. Kesalahan
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanC.html">8. Ayo Lakukan</a></li>
                            </ul>
                        </div>

                        <!-- Evaluasi -->
                        <a class="menu-item" href="../evaluasi.html">
                            <i class="bi bi-clipboard-check"></i> Evaluasi
                        </a>
                        <a class="menu-item" href="VideoPentup.html">
                            <i class="bi bi-camera-video"></i> Evaluasi
                        </a>
                    </nav>
                </aside>

                <!-- KONTEN KANAN -->
                <section class="col-12 col-md-9 col-xl-10 content-with-fixed order-2 order-md-0">
                    <div class="card shadow-sm materi-card">
                        <div class="card-header d-flex align-items-center gap-2">
                            <i class="bi bi-lightbulb" style="color:var(--brand); font-size:1.25rem;"></i>
                            <h3 class="h5 mb-0 fw-bold">Video Pengantar
                        </div>

                        <div class="card-body" id="apersepsi-hair-coloring">

                            <header class="py-4 bg-white border-bottom">
                                <div class="container">
                                    <h1 class="h4 mb-1">Prosedur Melakukan Hair Toning</h1>
                                    <p class="text-secondary mb-0">
                                        Dari menyiapkan alat sampai perawatan pasca pewarnaan. Bacalah materi lalu
                                        gunakan latihan interaktif
                                        di bawah untuk menguji pemahamanmu. Semua jawaban bisa <strong>disimpan di
                                            perangkat</strong> melalui
                                        <em>local storage</em>.
                                    </p>
                                </div>
                            </header>

                            <!-- MATERI RINGKAS -->
                            <section id="materi" class="mb-4">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-start mb-2">
                                            <div>
                                                <div class="badge-kecil mb-1">Ringkasan Materi</div>
                                                <h2 class="h5 mb-2">Persiapan & Langkah Kerja Hair Toning</h2>
                                            </div>
                                        </div>

                                        <p class="mb-2">
                                            Sebelum melakukan <strong>hair toning</strong>, stylist harus menyiapkan
                                            alat, bahan, dan kosmetik yang
                                            tepat, lalu mengikuti langkah kerja secara berurutan. Toning yang benar akan
                                            membantu menetralkan warna
                                            tidak diinginkan, meratakan warna rambut, dan menjaga kesehatan rambut
                                            setelah proses pewarnaan.
                                        </p>

                                        <h6 class="mt-3">Tabel 6.4 Persiapan Hair Toning (Ringkas)</h6>
                                        <div class="table-responsive mb-3">
                                            <table class="table table-sm align-middle">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th style="width:35%">Kategori</th>
                                                        <th>Alat dan Bahan</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><strong>Perlengkapan utama</strong></td>
                                                        <td>Sarung tangan, mangkuk pencampur dan kuas pewarna, sisir dan
                                                            klip pemisah rambut, cape pelindung.
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Kosmetik toning</strong></td>
                                                        <td>Toner dan developer (sesuai petunjuk produk), sampo dan
                                                            kondisioner khusus rambut berwarna,
                                                            <em>purple/blue shampoo</em> bila diperlukan.
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>Alat bantu</strong></td>
                                                        <td>Handuk, timer, serta perlindungan area kulit atau pakaian di
                                                            sekitar garis rambut.</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <h6 class="mt-3">Tabel 6.5 Langkah Kerja (Ringkas)</h6>
                                        <ol class="small text-secondary mb-3">
                                            <li><strong>Persiapan rambut pelanggan:</strong> cuci dengan sampo lembut
                                                tanpa kondisioner, keringkan
                                                hingga sekitar 80%.</li>
                                            <li><strong>Mempersiapkan kosmetik toning:</strong> baca instruksi, campur
                                                toner dengan developer sesuai
                                                perbandingan yang dianjurkan.</li>
                                            <li><strong>Melindungi kulit dan pakaian:</strong> pasang cape, handuk,
                                                serta pelindung di sekitar garis
                                                rambut.</li>
                                            <li><strong>Aplikasi toner:</strong> bagi rambut menjadi beberapa bagian,
                                                oleskan toner secara rata
                                                dari belakang ke depan.</li>
                                            <li><strong>Pemrosesan:</strong> diamkan sesuai waktu pada petunjuk (±15–30
                                                menit), cek warna secara
                                                berkala.</li>
                                            <li><strong>Pembilasan & penataan:</strong> bilas sampai air jernih, gunakan
                                                sampo/ kondisioner khusus
                                                rambut berwarna, lalu keringkan dan tata sesuai keinginan.</li>
                                            <li><strong>Perawatan pascapewarnaan:</strong> anjurkan klien menggunakan
                                                sampo khusus toning dan
                                                tidak terlalu sering keramas agar warna tahan lama.</li>
                                        </ol>

                                        <figure class="mt-3 text-center">
                                            <img src="../img/6,4.png" alt="Gambar 6.4 Hasil Hair Toning"
                                                class="img-fluid" width="150px" height="300px">
                                            <figcaption class="small text-secondary mt-2">
                                                Gambar 6.4 Hasil Hair Toning<br>
                                                <em>Sumber: pinterest / Jennie Baker</em>
                                            </figcaption>
                                        </figure>
                                    </div>
                                </div>
                            </section>

                            <!-- INTERAKTIF 1: CEKLIST ALAT -->
                            <section id="alat" class="mb-4">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <div>
                                                <div class="badge-kecil mb-1">Interaktif 1</div>
                                                <h2 class="h6 mb-0">Checklist Persiapan Alat & Bahan</h2>
                                            </div>
                                            <span id="infoSaveAlat" class="toast-mini"></span>
                                        </div>
                                        <p class="small text-secondary">
                                            Centang alat/bahan yang <strong>wajib</strong> ada sebelum hair toning
                                            dilakukan.
                                        </p>

                                        <div id="ceklistAlat" class="mb-2">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="alat1">
                                                <label class="form-check-label" for="alat1">
                                                    Sarung tangan untuk melindungi tangan dari bahan kimia.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="alat2">
                                                <label class="form-check-label" for="alat2">
                                                    Mangkuk pencampur dan kuas pewarna untuk mengoleskan toner.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="alat3">
                                                <label class="form-check-label" for="alat3">
                                                    Cape pelindung, handuk, dan pelindung kulit di sekitar garis rambut.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="alat4">
                                                <label class="form-check-label" for="alat4">
                                                    Toner dan developer yang sesuai petunjuk produk.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="alat5">
                                                <label class="form-check-label" for="alat5">
                                                    Sampo dan kondisioner khusus rambut diwarnai.
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="alat6">
                                                <label class="form-check-label" for="alat6">
                                                    Cat kuku warna terang (opsional, tidak berkaitan langsung dengan
                                                    toning).
                                                </label>
                                            </div>
                                        </div>

                                        <div id="feedAlat" class="small mt-1"></div>
                                        <div class="mt-2 d-flex gap-2">
                                            <button class="btn btn-outline-pink btn-sm" onclick="cekAlat()">Cek
                                                Jawaban</button>
                                            <button class="btn btn-outline-pink btn-sm"
                                                onclick="saveState('alat')">Simpan Jawaban</button>
                                            <button class="btn btn-reset btn-sm" onclick="resetAlat()">Reset</button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- INTERAKTIF 2: URUTAN LANGKAH (DRAG) -->
                            <section id="langkah" class="mb-4">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <div>
                                                <div class="badge-kecil mb-1">Interaktif 2</div>
                                                <h2 class="h6 mb-0">Urutkan Langkah Kerja Hair Toning</h2>
                                            </div>
                                            <span id="infoSaveLangkah" class="toast-mini"></span>
                                        </div>
                                        <p class="small text-secondary mb-2">
                                            Seret chip langkah dari kolom kiri ke kolom kanan lalu susun urut dari atas
                                            ke bawah.
                                        </p>

                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <h6 class="small text-secondary mb-1">Bank Langkah</h6>
                                                <div id="stepPool" class="drop-area">
                                                    <span class="step-chip draggable" draggable="true" id="s1"
                                                        data-pos="1">
                                                        Persiapan rambut pelanggan
                                                    </span>
                                                    <span class="step-chip draggable" draggable="true" id="s2"
                                                        data-pos="2">
                                                        Mempersiapkan kosmetik toning
                                                    </span>
                                                    <span class="step-chip draggable" draggable="true" id="s3"
                                                        data-pos="3">
                                                        Melindungi kulit dan pakaian
                                                    </span>
                                                    <span class="step-chip draggable" draggable="true" id="s4"
                                                        data-pos="4">
                                                        Aplikasi toner
                                                    </span>
                                                    <span class="step-chip draggable" draggable="true" id="s5"
                                                        data-pos="5">
                                                        Pemrosesan (menunggu sesuai waktu)
                                                    </span>
                                                    <span class="step-chip draggable" draggable="true" id="s6"
                                                        data-pos="6">
                                                        Pembilasan
                                                    </span>
                                                    <span class="step-chip draggable" draggable="true" id="s7"
                                                        data-pos="7">
                                                        Pengeringan & penataan
                                                    </span>
                                                    <span class="step-chip draggable" draggable="true" id="s8"
                                                        data-pos="8">
                                                        Perawatan pascapewarnaan
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <h6 class="small text-secondary mb-1">Susun Di Sini (1–8)</h6>
                                                <div id="stepOrder" class="drop-area"></div>
                                            </div>
                                        </div>

                                        <div id="feedLangkah" class="small mt-2"></div>
                                        <div class="mt-2 d-flex gap-2">
                                            <button class="btn btn-outline-pink btn-sm" onclick="cekLangkah()">Cek
                                                Urutan</button>
                                            <button class="btn btn-outline-pink btn-sm"
                                                onclick="saveState('langkah')">Simpan Urutan</button>
                                            <button class="btn btn-reset btn-sm" onclick="resetLangkah()">Reset</button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- INTERAKTIF 3: SIMULASI PROSES -->
                            <section id="simulasi" class="mb-5">
                                <div class="card card-toning shadow-sm">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <div>
                                                <div class="badge-kecil mb-1">Interaktif 3</div>
                                                <h2 class="h6 mb-0">Simulasi Waktu Pemrosesan Toning</h2>
                                            </div>
                                            <span id="infoSaveSim" class="toast-mini"></span>
                                        </div>

                                        <p class="small text-secondary">
                                            Pilih kondisi rambut klien dan target warna, lalu atur estimasi waktu
                                            pemrosesan. Simulasi ini
                                            <strong>tidak menggantikan petunjuk produk asli</strong>, tetapi membantumu
                                            memahami konsepnya.
                                        </p>

                                        <div class="row g-3 mb-3">
                                            <div class="col-md-4">
                                                <label class="form-label small">1) Kondisi rambut klien</label>
                                                <select id="simCondition" class="form-select form-select-sm">
                                                    <option value="">-- pilih --</option>
                                                    <option value="virgin">Virgin hair (belum pernah diwarnai)</option>
                                                    <option value="precolored">Pernah diwarnai sebelumnya</option>
                                                    <option value="bleached">Sudah di-bleaching</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">2) Tujuan toning</label>
                                                <select id="simGoal" class="form-select form-select-sm">
                                                    <option value="">-- pilih --</option>
                                                    <option value="neutralize">Menetralisir kuning/oranye</option>
                                                    <option value="refresh">Menyegarkan kembali warna yang pudar
                                                    </option>
                                                    <option value="soften">Melembutkan hasil warna agar tampak natural
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">3) Waktu pemrosesan (menit)</label>
                                                <input type="range" id="simTime" class="form-range" min="10" max="40"
                                                    step="5" value="20">
                                                <div class="d-flex justify-content-between small text-secondary">
                                                    <span>10</span><span>25</span><span>40</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row g-3 align-items-center mb-2">
                                            <div class="col-md-5">
                                                <h6 class="small mb-1">Preview Rambut</h6>
                                                <div id="simPreview" class="sim-preview"></div>
                                                <div class="small text-secondary mt-1">
                                                    *Ilustrasi tone saja, bukan warna pasti di dunia nyata.
                                                </div>
                                            </div>
                                            <div class="col-md-7">
                                                <h6 class="small mb-1">Rangkuman Simulasi</h6>
                                                <div id="simResult" class="small border rounded p-3 bg-light">
                                                    Atur pilihan di atas lalu klik <strong>Jalankan Simulasi</strong>
                                                    untuk melihat saran waktu dan penjelasan.
                                                </div>
                                                <div class="mt-2">
                                                    <span class="time-pill">Waktu terpilih: <span
                                                            id="simTimeLabel">20</span> menit</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="mt-2 d-flex gap-2">
                                            <button class="btn btn-outline-pink btn-sm" onclick="runSim()">Jalankan
                                                Simulasi</button>
                                            <button class="btn btn-outline-pink btn-sm"
                                                onclick="saveState('sim')">Simpan Simulasi</button>
                                            <button class="btn btn-reset btn-sm" onclick="resetSim()">Reset</button>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <!-- TOMBOL NAVIGASI DI BAWAH KONTEN -->
                    <div class="page-nav">
                        <div class="page-nav-inner">
                            <a class="btn btn-outline-secondary" href="KosmetikHairToning.html">
                                <i class="bi bi-arrow-left"></i> Sebelumnya
                            </a>
                            <a class="btn btn-brand" href="HalDiperhatikanToning.html">
                                Berikutnya <i class="bi bi-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small">
            <span>SMKS ISFI BANJARMASIN • Hair Coloring</span>
            <span class="text-muted">© 2025 • Single Application</span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const LS_KEY = 'hairToning_procedure_v1';

        // ---------- LOCAL STORAGE : SAVE & LOAD STATE ----------
        function saveState(fromSection) {
            if (typeof Storage === 'undefined') return;

            const state = {
                // interaktif 1
                alat: {
                    alat1: document.getElementById('alat1').checked,
                    alat2: document.getElementById('alat2').checked,
                    alat3: document.getElementById('alat3').checked,
                    alat4: document.getElementById('alat4').checked,
                    alat5: document.getElementById('alat5').checked,
                    alat6: document.getElementById('alat6').checked,
                    feed: document.getElementById('feedAlat').innerHTML
                },
                // interaktif 2
                langkah: (() => {
                    const parents = {};
                    ['s1', 's2', 's3', 's4', 's5', 's6', 's7', 's8'].forEach(id => {
                        const el = document.getElementById(id);
                        if (el && el.parentElement) {
                            parents[id] = el.parentElement.id || 'stepPool';
                        }
                    });
                    return {
                        parents,
                        feed: document.getElementById('feedLangkah').innerHTML
                    };
                })(),
                // interaktif 3
                sim: {
                    condition: document.getElementById('simCondition').value,
                    goal: document.getElementById('simGoal').value,
                    time: document.getElementById('simTime').value,
                    result: document.getElementById('simResult').innerHTML
                }
            };

            localStorage.setItem(LS_KEY, JSON.stringify(state));

            if (fromSection === 'alat') {
                document.getElementById('infoSaveAlat').textContent = '✔ Disimpan di perangkat';
                setTimeout(() => document.getElementById('infoSaveAlat').textContent = '', 2000);
            }
            if (fromSection === 'langkah') {
                document.getElementById('infoSaveLangkah').textContent = '✔ Disimpan di perangkat';
                setTimeout(() => document.getElementById('infoSaveLangkah').textContent = '', 2000);
            }
            if (fromSection === 'sim') {
                document.getElementById('infoSaveSim').textContent = '✔ Disimpan di perangkat';
                setTimeout(() => document.getElementById('infoSaveSim').textContent = '', 2000);
            }
        }

        function loadState() {
            if (typeof Storage === 'undefined') return;
            const raw = localStorage.getItem(LS_KEY);
            if (!raw) return;

            let state;
            try { state = JSON.parse(raw); } catch (e) { console.error(e); return; }
            if (!state) return;

            // Alat
            if (state.alat) {
                ['alat1', 'alat2', 'alat3', 'alat4', 'alat5', 'alat6'].forEach(id => {
                    if (state.alat[id] !== undefined) {
                        document.getElementById(id).checked = !!state.alat[id];
                    }
                });
                if (state.alat.feed) document.getElementById('feedAlat').innerHTML = state.alat.feed;
            }

            // Langkah
            if (state.langkah && state.langkah.parents) {
                const pool = document.getElementById('stepPool');
                Object.keys(state.langkah.parents).forEach(id => {
                    const parentId = state.langkah.parents[id];
                    const parent = document.getElementById(parentId) || pool;
                    const chip = document.getElementById(id);
                    if (chip && parent) parent.appendChild(chip);
                });
                if (state.langkah.feed) document.getElementById('feedLangkah').innerHTML = state.langkah.feed;
            }

            // Simulasi
            if (state.sim) {
                document.getElementById('simCondition').value = state.sim.condition || '';
                document.getElementById('simGoal').value = state.sim.goal || '';
                if (state.sim.time) {
                    document.getElementById('simTime').value = state.sim.time;
                    document.getElementById('simTimeLabel').textContent = state.sim.time;
                }
                if (state.sim.result) document.getElementById('simResult').innerHTML = state.sim.result;
            }
        }

        // ---------- INTERAKTIF 1 : CEKLIST ALAT ----------
        function cekAlat() {
            const a1 = document.getElementById('alat1').checked;
            const a2 = document.getElementById('alat2').checked;
            const a3 = document.getElementById('alat3').checked;
            const a4 = document.getElementById('alat4').checked;
            const a5 = document.getElementById('alat5').checked;
            const a6 = document.getElementById('alat6').checked;
            const box = document.getElementById('feedAlat');

            if (!a1 && !a2 && !a3 && !a4 && !a5 && !a6) {
                box.innerHTML = '<span class="text-danger">Pilih dulu minimal satu alat/bahan.</span>';
                return;
            }

            if (a1 && a2 && a3 && a4 && a5 && !a6) {
                box.innerHTML = '<span class="text-success">✅ Lengkap! Semua alat penting sudah dicentang, dan kamu tidak memasukkan benda yang tidak perlu.</span>';
            } else {
                box.innerHTML = '<span class="text-warning">⚠️ Masih ada yang kurang/berlebih. Pastikan sarung tangan, mangkuk & kuas, pelindung, toner + developer, dan sampo/cond khusus rambut berwarna semuanya dicentang, sedangkan cat kuku tidak perlu.</span>';
            }
        }

        function resetAlat() {
            ['alat1', 'alat2', 'alat3', 'alat4', 'alat5', 'alat6'].forEach(id => {
                document.getElementById(id).checked = false;
            });
            document.getElementById('feedAlat').innerHTML = '';
            saveState(); // update ls tanpa toast
        }

        // ---------- INTERAKTIF 2 : DRAG & DROP LANGKAH ----------
        function setupDrag() {
            document.querySelectorAll('.draggable').forEach(chip => {
                chip.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('chipId', chip.id);
                });
            });

            document.querySelectorAll('.drop-area').forEach(area => {
                area.addEventListener('dragover', e => {
                    e.preventDefault();
                    area.classList.add('active');
                });
                area.addEventListener('dragleave', () => {
                    area.classList.remove('active');
                });
                area.addEventListener('drop', e => {
                    e.preventDefault();
                    area.classList.remove('active');
                    const id = e.dataTransfer.getData('chipId');
                    const chip = document.getElementById(id);
                    if (chip) area.appendChild(chip);
                });
            });
        }

        function cekLangkah() {
            const orderArea = document.getElementById('stepOrder');
            const chips = Array.from(orderArea.querySelectorAll('.step-chip'));
            const feed = document.getElementById('feedLangkah');
            const expected = ['s1', 's2', 's3', 's4', 's5', 's6', 's7', 's8'];

            orderArea.classList.remove('correct', 'wrong');

            if (chips.length === 0) {
                feed.innerHTML = '<span class="text-danger">Seret dulu semua langkah ke kolom kanan.</span>';
                orderArea.classList.add('wrong');
                return;
            }

            const ids = chips.map(c => c.id);
            let benar = ids.length === expected.length;
            if (benar) {
                for (let i = 0; i < expected.length; i++) {
                    if (ids[i] !== expected[i]) { benar = false; break; }
                }
            }

            if (benar) {
                feed.innerHTML = '<span class="text-success">✅ Urutannya tepat! Kamu sudah memahami alur kerja hair toning dari persiapan sampai perawatan.</span>';
                orderArea.classList.add('correct');
            } else {
                feed.innerHTML = '<span class="text-warning">⚠️ Urutan belum tepat. Ingat: mulai dari persiapan rambut, campur kosmetik, lindungi kulit/pakaian, baru aplikasi toner, pemrosesan, pembilasan, pengeringan & penataan, lalu perawatan pascapewarnaan.</span>';
                orderArea.classList.add('wrong');
            }
        }

        function resetLangkah() {
            const pool = document.getElementById('stepPool');
            const order = document.getElementById('stepOrder');
            order.classList.remove('correct', 'wrong');
            document.getElementById('feedLangkah').innerHTML = '';

            ['s1', 's2', 's3', 's4', 's5', 's6', 's7', 's8'].forEach(id => {
                const chip = document.getElementById(id);
                if (chip) pool.appendChild(chip);
            });
            saveState();
        }

        // ---------- INTERAKTIF 3 : SIMULASI ----------
        document.getElementById('simTime').addEventListener('input', e => {
            document.getElementById('simTimeLabel').textContent = e.target.value;
        });

        function runSim() {
            const cond = document.getElementById('simCondition').value;
            const goal = document.getElementById('simGoal').value;
            const time = Number(document.getElementById('simTime').value);
            const box = document.getElementById('simResult');
            const preview = document.getElementById('simPreview');

            if (!cond || !goal) {
                box.innerHTML = '<span class="text-danger">Pilih dulu kondisi rambut dan tujuan toning.</span>';
                return;
            }

            // Ubah gradien preview sedikit berdasar kondisi
            if (cond === 'virgin') {
                preview.style.background = 'linear-gradient(90deg,#4b5563,#9ca3af)';
            } else if (cond === 'precolored') {
                preview.style.background = 'linear-gradient(90deg,#4b5563,#fbbfcb)';
            } else {
                preview.style.background = 'linear-gradient(90deg,#9ca3af,#e5e7eb)';
            }

            let teks = '';

            if (goal === 'neutralize') {
                teks += 'Toning difokuskan untuk <strong>menetralisir kuning atau oranye</strong> setelah bleaching/pewarnaan.';
            } else if (goal === 'refresh') {
                teks += 'Toning bertujuan <strong>menyegarkan kembali warna yang mulai pudar</strong> agar tampak hidup lagi.';
            } else {
                teks += 'Toning digunakan untuk <strong>melembutkan hasil warna</strong> sehingga terlihat lebih natural.';
            }

            teks += ' Untuk kondisi rambut <strong>' +
                (cond === 'virgin' ? 'virgin hair' : cond === 'precolored' ? 'pernah diwarnai' : 'sudah di-bleaching') +
                '</strong>, waktu pemrosesan sekitar <strong>' + time + ' menit</strong> masih dalam kisaran umum. ';

            if (time <= 15) {
                teks += 'Waktu relatif singkat, cocok untuk toning ringan atau sekadar menambahkan kilau.';
            } else if (time <= 25) {
                teks += 'Waktu sedang, cukup untuk menetralkan warna tanpa membuat rambut terlalu gelap.';
            } else {
                teks += 'Waktu cukup lama, biasanya dipakai untuk koreksi warna yang kuat—pastikan selalu mengikuti petunjuk produk agar tidak over-processing.';
            }

            teks += '<br><br><em>Catatan:</em> selalu baca instruksi pada kemasan toner dan lakukan uji helai bila ragu.';

            box.innerHTML = teks;
        }

        function resetSim() {
            document.getElementById('simCondition').value = '';
            document.getElementById('simGoal').value = '';
            document.getElementById('simTime').value = 20;
            document.getElementById('simTimeLabel').textContent = '20';
            document.getElementById('simPreview').style.background =
                'linear-gradient(90deg,#4b5563,#9ca3af)';
            document.getElementById('simResult').innerHTML =
                'Atur pilihan di atas lalu klik <strong>Jalankan Simulasi</strong> untuk melihat saran waktu dan penjelasan.';
            saveState();
        }

        // ---------- INIT ----------
        window.addEventListener('DOMContentLoaded', () => {
            setupDrag();
            loadState();
        });
    </script>
</body>

</html>